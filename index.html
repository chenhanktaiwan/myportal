<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å€‹äººå…¥å£ç¶²ç«™ - [å®Œæ•´åˆ†é æ¶æ§‹]</title>
<style>
  /* ä½ çš„ CSS æ¨£å¼ (å®Œæ•´ä¿ç•™) */
  * {margin:0;padding:0;box-sizing:border-box;}
  body {
    font-family:'Microsoft JhengHei','PingFang TC',sans-serif;
    background:linear-gradient(135deg,#dde9e7 0,#c9dbd9 100%);
    color:#526c67;
    min-height:100vh;
    padding:20px;
    /* [ä¿®æ”¹] ç‚º sticky header é ç•™ç©ºé–“ */
    /* 150px (å°è¦½åˆ—) + 20px (body padding) = 170px */
    padding-top: 170px; 
  }
  .container {max-width:1400px;margin:0 auto;}
  .header {
    background:linear-gradient(135deg,#7ba8a3 0,#9dbfbb 100%);
    padding:32px 48px;
    border-radius:24px;
    color:white;
    margin-bottom:32px;
    box-shadow:0 8px 30px rgba(123,168,163,0.25);
  }
  .header-top {
    display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;gap:20px;
  }
  .greeting-section {font-weight:700; font-size:28px;}
  .datetime {margin-top:6px; font-weight:500; font-size:15px; opacity:0.9;}
  .location-selector {
    background:rgba(255 255 255 / 26%);
    border:2px solid rgba(255 255 255 / 38%);
    border-radius:12px;
    font-size:14px;
    color:white;
    padding:9px 20px;
    cursor:pointer;
    backdrop-filter:blur(12px);
    transition:background 0.3s,border 0.3s;
  }
  .location-selector:hover, .location-selector:focus {
    background:rgba(255 255 255 / 34%);
    border-color:rgba(255 255 255 / 60%);
    outline:none;
  }
  .weather-forecast-horizontal {
    display:grid;
    gap:18px;
    grid-template-columns:repeat(7,1fr);
  }
  .weather-day-h {
    background:rgba(255 255 255 / 23%);
    border-radius:14px;
    padding:18px 15px 15px;
    border:2px solid rgba(255 255 255 / 12%);
    text-align:center;
  }
  .weather-date-h {font-size:13px; font-weight:700; margin-bottom:8px;}
  .weather-emoji-h {font-size:40px; margin-bottom:6px; display:block; user-select:none;}
  .weather-temp-h {font-size:17px; font-weight:700;}
  .weather-rain-h {font-size:13px; margin-top:5px; color:#def1f0aa;}
  .weather-desc-h {font-size:12px; margin-top:1px; color:#d0e2e0cc;}
  .weather-loading {
    grid-column:span 7;
    text-align:center;
    padding:22px 0;
    color:white;
    font-weight:700;
  }
  
  /* [ä¿®æ”¹] æœå°‹åˆ—ç¾åœ¨æ˜¯ .portal-nav-sticky çš„ä¸€éƒ¨åˆ† */
  .search-section {
    display:flex; 
    gap:10px;
  }
  .search-input {
    flex:1;
    font-size:17px;
    border-radius:16px;
    padding:14px 20px;
    border:2px solid #a3bbb9;
    transition:all 0.3s ease;
    font-weight:400;
  }
  .search-input:focus {
    outline:none;
    border-color:#7ba8a3;
    box-shadow:0 0 0 4px rgba(123 168 163 / 0.2);
  }
  .search-btn {
    background-color:#7ba8a3;
    border-radius:16px;
    border:none;
    color:white;
    font-size:17px;
    font-weight:700;
    cursor:pointer;
    padding:14px 32px;
    transition:background-color 0.35s ease;
  }
  .search-btn:hover {background-color:#618577;}

  /* ä½ çš„ CSS (ä¿ç•™) */
  .info-section {
    display:flex;
    gap:32px;
    flex-wrap:wrap;
  }
  .news-card {
    flex:1;
    min-width:430px;
    max-width:720px;
    background:white;
    border-radius:20px;
    box-shadow:0 8px 32px #a6b7b68e;
    padding:28px 38px;
  }
  .section-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:14px;
    flex-wrap:wrap;
    gap:12px;
  }
  .section-title {
    display:flex;
    gap:8px;
    font-weight:700;
    font-size:22px;
    color:#578f89;
    align-items:center;
  }
  .section-icon {
    background:linear-gradient(135deg,#7ba8a3,#9dbfbb);
    border-radius:8px;
    color:white;
    width:36px;
    height:36px;
    display:grid;
    place-items:center;
    font-weight:900;
    font-size:18px;
  }
  .news-tabs {
    display:flex;
    gap:14px;
  }
  .news-tab {
    border-radius:12px;
    background:#f3fbfb;
    color:#578f89;
    font-weight:600;
    font-size:16px;
    padding:8px 23px;
    border:2px solid #cee2df;
    cursor:pointer;
    transition:background-color 0.3s ease,border-color 0.3s ease;
    user-select:none;
  }
  .news-tab.active,.news-tab:hover {
    background:#7ba8a3;
    border-color:#7ba8a3;
    color:white;
  }
  .refresh-btn {
    font-weight:600;
    background:#7ba8a3;
    color:white;
    border:none;
    border-radius:12px;
    padding:8px 22px;
    cursor:pointer;
    font-size:16px;
    transition:background-color 0.3s ease;
  }
  .refresh-btn:disabled {opacity:0.5; cursor:not-allowed;}
  .news-list {
    list-style:none;
    max-height:480px;
    overflow-y:auto;
    padding:0;
  }
  .news-item {
    border-left:4px solid #86b4a9;
    margin-bottom:11px;
    background:#f1f7f5;
    border-radius:12px;
    padding:14px 20px;
    font-weight:600;
    color:#3a6259;
    cursor:pointer;
    transition:background 0.3s ease;
  }
  .news-item:hover {
    background:#9ac2b9;
    color:white;
  }
  .news-item-title {
    font-size:15px;
    margin-bottom:6px;
  }
  .news-item-meta {
    margin-top:6px;
    font-weight:400;
    font-size:12px;
    color:#58716b;
    display:flex;
    justify-content:space-between;
  }
  .news-loading {text-align:center;padding:20px;color:#7a9794;font-weight:600;}
  /* è‚¡ç¥¨å¡ (ä½ çš„ CSS æ¨£å¼ï¼Œå®Œæ•´ä¿ç•™) */
  .stock-card {
    flex-basis:380px;
    background:white;
    border-radius:20px;
    padding:28px 26px;
    box-shadow:0 8px 30px #a2b8b39e;
    display:flex;
    flex-direction:column;
    gap:20px;
  }
  .stock-tabs {
    display:flex;
    gap:12px;
    margin-top:4px;
  }
  .stock-tab {
    padding:8px 30px;
    border-radius:12px;
    border:2px solid #a6cdc5;
    background:#ccede9;
    font-size:18px;
    font-weight:700;
    color:#3e7e72;
    cursor:pointer;
    transition:all 0.28s ease;
    user-select:none;
  }
  .stock-tab.active, .stock-tab:hover {
    border-color:#7ba8a3;
    background:#7ba8a3;
    color:white;
  }
  .stock-search {
    display:flex;
    gap:11px;
  }
  .stock-search-input {
    padding:14px 18px;
    border-radius:16px;
    font-size:17px;
    font-weight:600;
    border:2px solid #a1d1c4;
    background:#dbece8;
    color:#376655;
    flex:1;
    transition:border-color 0.3s ease;
  }
  .stock-search-input:focus {
    outline:none;
    border-color:#7ba8a3;
  }
  .stock-add-btn {
    background:#7ba8a3;
    border-radius:18px;
    padding:14px 28px;
    cursor:pointer;
    font-size:1.05rem;
    font-weight:700;
    color:white;
    border:none;
    transition:background-color 0.3s ease;
  }
  .stock-add-btn:hover {
    background:#628775;
  }
  .stock-list {
    max-height:400px;
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    gap:13px;
  }
  .stock-item {
    background:#cee3db;
    border-radius:14px;
    padding:16px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:15px;
    cursor:pointer;
    transition:background-color 0.3s ease;
    font-weight:700;
    color:#3c786c;
  }
  .stock-item:hover {
    background:#7ba8a3;
    color:white;
  }
  .stock-info {
    display:flex;
    flex-direction:column;
    gap:6px;
    text-align:left;
    min-width:8.4rem;
  }
  .stock-symbol {
    font-size:1.35rem;
  }
  .stock-name {
    font-weight:400;
    font-size:0.87rem;
    color:#4a655c;
  }
  .stock-price-info {
    text-align:right;
    min-width:7rem;
  }
  .stock-price {
    font-size:1.45rem;
  }
  .stock-change {
    font-size:1rem;
  }
  .stock-up {
    color:#e2646a;
  }
  .stock-down {
    color:#2e7052;
  }
  .stock-neutral {
    color:#50766e;
  }

  /* ä½ çš„ CSS æ¨£å¼ (å®Œæ•´ä¿ç•™) */
  .main-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 32px;
    margin-top: 32px;
  }
  .card {
    background: white;
    border-radius: 20px;
    box-shadow: 0 8px 30px #a2b8b36e;
    padding: 28px 26px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .card-title {
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 700;
    font-size: 20px;
    color: #578f89;
    border-bottom: 2px solid #e0ebea;
    padding-bottom: 12px;
  }
  .card-icon {
    font-size: 18px;
  }
  .project-item {
    background: #f1f7f5;
    border-radius: 12px;
    padding: 16px 20px;
    cursor: pointer;
    transition: background 0.3s, box-shadow 0.3s;
  }
  .project-item:hover {
    background: #e6f0ee;
    box-shadow: 0 4px 12px #b8cac7;
  }
  .project-name { font-weight: 700; color: #3a6259; margin-bottom: 6px; }
  .project-desc { font-size: 14px; color: #58716b; }
  .tool-item {
    display: flex;
    align-items: center;
    gap: 16px;
    background: #f1f7f5;
    padding: 16px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.3s;
  }
  .tool-item:hover { background: #e6f0ee; }
  .tool-icon {
    width: 48px;
    height: 48px;
    border-radius: 10px;
    display: grid;
    place-items: center;
    background: #cce3db;
    color: #3e7e72;
    font-weight: 700;
  }
  .tool-info { flex: 1; }
  .tool-name { font-weight: 700; color: #3a6259; }
  .tool-url { font-size: 14px; color: #58716b; }
  .link-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  .quick-link {
    background: #f1f7f5;
    padding: 14px 18px;
    border-radius: 12px;
    font-weight: 600;
    color: #3a6259;
    cursor: pointer;
    transition: background 0.3s;
  }
  .quick-link:hover { background: #e6f0ee; }
  .bookmark-section { display: flex; flex-direction: column; gap: 10px; }
  .bookmark-category {
    font-weight: 700;
    color: #3e7e72;
    margin-top: 8px;
  }
  .bookmark-link {
    padding-left: 12px;
    border-left: 3px solid #cce3db;
    font-weight: 600;
    color: #3a6259;
    cursor: pointer;
  }
  .bookmark-link:hover { color: #7ba8a3; }

  /* ä½ çš„åœ°åœ– CSS (å®Œæ•´ä¿ç•™) */
  .map-card-full {
    background: white;
    border-radius: 20px;
    box-shadow: 0 8px 32px #a6b7b68e;
    padding: 28px 38px;
    margin-top: 32px; /* èˆ‡ä¸Šæ–¹ info-section çš„é–“è· */
  }
  .map-card-full .section-header {
    gap: 20px; /* æ¨™é¡Œå’Œæœå°‹æ¡†çš„é–“è· */
  }
  .map-search-box {
    display: flex;
    flex: 1; /* è‡ªå‹•å¡«æ»¿å‰©é¤˜ç©ºé–“ */
    gap: 10px;
    min-width: 250px; /* ç¢ºä¿åœ¨å°è¢å¹•ä¸æœƒå¤ªçª„ */
    max-width: 600px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
  }
  .map-content {
    margin-top: 20px;
  }
  .map-content iframe {
    border-radius: 12px;
    border: 2px solid #cee2df; /* é…åˆä¸»é¡Œçš„é‚Šæ¡† */
    width: 100%;
    height: 500px;
  }

  /* --- [æ–°åŠŸèƒ½] ç½®é ‚å°è¦½åˆ— å’Œ åˆ†é  CSS --- */
  .portal-nav-sticky {
    position: sticky;
    top: 20px; /* é…åˆ body çš„ padding */
    z-index: 1000;
    
    background:linear-gradient(135deg,#7ba8a3 0,#9dbfbb 100%);
    padding: 24px 32px;
    border-radius: 24px;
    box-shadow: 0 8px 30px rgba(123, 168, 163, 0.35);
    
    /* ç¢ºä¿åœ¨ .container å…§éƒ¨æ­£ç¢ºå°é½Š */
    max-width: 1400px; 
    margin: -150px auto 0 auto; /* å¾€ä¸Šæ‹‰å›åŸé» */
    top: 20px;
  }
  
  .portal-tabs {
    display: flex;
    gap: 16px;
    margin-bottom: 20px; /* æ¨™ç±¤å’Œæœå°‹åˆ—çš„é–“è· */
  }
  
  .portal-tab-btn {
    font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.23);
    border: 2px solid rgba(255, 255, 255, 0.12);
    color: white;
    font-weight: 700;
    font-size: 18px;
    padding: 10px 28px;
    cursor: pointer;
    transition: background 0.3s ease, border-color 0.3s ease;
    user-select: none;
  }
  
  .portal-tab-btn.active, .portal-tab-btn:hover {
    background: white;
    border-color: white;
    color: #7ba8a3; /* é»é¸å¾Œè®Šç‚ºä¸»é¡Œç¶ è‰² */
  }
  
  /* åˆ†é å…§å®¹ */
  .page-content {
    /* é è¨­éš±è—ï¼ŒJS æœƒæ§åˆ¶é¡¯ç¤º */
    display: none;
    /* [æ–°å¢] ç¢ºä¿å…§å®¹åœ¨ sticky header ä¸‹æ–¹ */
    margin-top: 32px;
  }
  
  .page-content.active {
    /* é¡¯ç¤º active çš„åˆ†é  */
    display: block;
  }
  /* --- [æ–°åŠŸèƒ½] CSS çµæŸ --- */

</style>
</head>
<body>
<div class="container">

  <div class="portal-nav-sticky">
    <div class="portal-tabs">
        <button class="portal-tab-btn active" data-page="home">é¦–é </button>
        <button class="portal-tab-btn" data-page="personal">å€‹äºº</button>
        <button class="portal-tab-btn" data-page="news">æ–°è</button>
        <button class="portal-tab-btn" data-page="map">åœ°åœ–</button>
        <button class="portal-tab-btn" data-page="work">å·¥ä½œ</button>
    </div>
    
    <div class="search-section">
      <input id="searchInput" class="search-input" placeholder="æœå°‹ Google æˆ–è¼¸å…¥ç¶²å€..."/>
      <button id="searchBtn" class="search-btn">æœå°‹</button>
    </div>
  </div>


  <div id="page-home" class="page-content active">
  
    <div class="header">
      <div class="header-top">
        <div class="greeting-section">
          <div class="greeting">æ‚¨å¥½ï¼æ­¡è¿å›ä¾† ğŸ‘‹</div>
          <div class="datetime" id="datetime"></div>
        </div>
        <select id="locationSelector" class="location-selector" aria-label="é¸æ“‡åŸå¸‚">
          <option value="25.0330,121.5654">å°åŒ—å¸‚</option>
          <option value="24.1477,120.6736">å°ä¸­å¸‚</option>
          <option value="22.6273,120.3014">é«˜é›„å¸‚</option>
          <option value="25.0375,121.4252">æ–°åŒ—å¸‚</option>
          <option value="24.8138,120.9675">æ–°ç«¹å¸‚</option>
          <option value="24.9936,121.3010">æ¡ƒåœ’å¸‚</option>
          <option value="22.9998,120.2269">å°å—å¸‚</option>
        </select>
      </div>
      <div class="weather-forecast-horizontal" id="weatherRow">
        <div class="weather-loading">è¼‰å…¥å¤©æ°£è³‡æ–™ä¸­...</div>
      </div>
    </div>
    
    <div class="info-section">
      <section class="news-card">
        <div class="section-header">
          <div class="section-title">
            <div class="section-icon">ğŸ“°</div>
            ä»Šæ—¥æ–°è
          </div>
          <div class="news-tabs">
            <button id="tab-tw" class="news-tab active">å°ç£</button>
            <button id="tab-jp" class="news-tab">æ—¥æœ¬</button>
            <button id="tab-intl" class="news-tab">åœ‹éš›</button>
            <button id="refreshNewsBtn" class="refresh-btn">é‡æ–°æ•´ç†</button>
          </div>
        </div>
        <ul id="newsList" class="news-list"></ul>
      </section>
      <section class="stock-card">
        <div class="section-header">
          <div class="section-title">è‚¡ç¥¨è¿½è¹¤</div>
          <div class="stock-tabs">
            <button id="stockTab_tw" class="stock-tab active">å°è‚¡</button>
            <button id="stockTab_us" class="stock-tab">ç¾è‚¡</button>
          </div>
        </div>
        <div class="stock-search">
          <input id="stockInput" class="stock-search-input" placeholder="è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼ï¼ˆä¾‹ï¼š2330 / AAPLï¼‰" />
          <button id="stockAddBtn" class="stock-add-btn">åŠ å…¥</button>
        </div>
        <div id="stocksList" class="stock-list">
          <div class="stocks-loading">è¼‰å…¥è‚¡ç¥¨è³‡æ–™ä¸­...</div>
        </div>
      </section>
    </div>

    <div class="map-card-full">
        <div class="section-header">
            <div class="section-title">
                <div class="section-icon">ğŸ—ºï¸</div>
                Google åœ°åœ–
            </div>
            <div class="map-search-box">
                <input id="mapSearchInput" class="search-input" placeholder="æœå°‹åœ°é»æˆ–åœ°å€...">
                <button id="mapSearchBtn" class="search-btn">æœå°‹</button>
            </div>
        </div>
        <div class="map-content">
            <iframe id="mapFrame"
                src="https://maps.google.com/maps?q=å°åŒ—101&t=&z=15&ie=UTF8&iwloc=&output=embed"
                frameborder="0" scrolling="no" marginheight="0" marginwidth="0">
            </iframe>
        </div>
    </div>

    <div class="main-content">
        <div class="card">
            <div class="card-title">
                <div class="card-icon">ğŸ“Š</div>
                æˆ‘çš„å°ˆæ¡ˆ
            </div>
            <div class="project-item" onclick="openLink('#')">
                <div class="project-name">éŠ·å”®æ•¸æ“šç®¡ç†ç³»çµ±</div>
                <div class="project-desc">OCR è¾¨è­˜ | æ•¸æ“šåˆ†æ | è¦–è¦ºåŒ–å„€è¡¨æ¿</div>
            </div>
            <div class="project-item" onclick="openLink('#')">
                <div class="project-name">æ•¸æ“šåˆ†æé é¢</div>
                <div class="project-desc">æœŸé–“å°æ¯” | å“é …åˆ†æ | è¶¨å‹¢åœ–è¡¨</div>
            </div>
            <div class="project-item" onclick="openLink('#')">
                <div class="project-name">ä¸Šå‚³ç®¡ç†ç³»çµ±</div>
                <div class="project-desc">åœ–ç‰‡ä¸Šå‚³ | OCR è™•ç† | æ•¸æ“šæ•´åˆ</div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="card-icon">ğŸ”§</div>
                å¸¸ç”¨å·¥å…·
            </div>
            <div class="tool-item" onclick="openLink('https://pages.cloudflare.com/')">
                <div class="tool-icon">CF</div>
                <div class="tool-info">
                    <div class="tool-name">Cloudflare Pages</div>
                    <div class="tool-url">é é¢éƒ¨ç½²ç®¡ç†</div>
                </div>
            </div>
            <div class="tool-item" onclick="openLink('https://gemini.google.com/')">
                <div class="tool-icon">AI</div>
                <div class="tool-info">
                    <div class="tool-name">Gemini AI</div>
                    <div class="tool-url">AI åŠ©ç†æœå‹™</div>
                </div>
            </div>
            <div class="tool-item" onclick="openLink('https://github.com/')">
                <div class="tool-icon">GH</div>
                <div class="tool-info">
                    <div class="tool-name">GitHub</div>
                    <div class="tool-url">ç¨‹å¼ç¢¼ç‰ˆæœ¬æ§åˆ¶</div>
                </div>
            </div>
            <div class="tool-item" onclick="openLink('https://www.canva.com/')">
                <div class="tool-icon">ğŸ¨</div>
                <div class="tool-info">
                    <div class="tool-name">Canva</div>
                    <div class="tool-url">åœ–å½¢è¨­è¨ˆå·¥å…·</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="card-icon">ğŸ”—</div>
                å¿«é€Ÿé€£çµ
            </div>
            <div class="link-grid">
                <div class="quick-link" onclick="openLink('https://www.google.com.tw')">Google æœå°‹</div>
                <div class="quick-link" onclick="openLink('https://mail.google.com')">Gmail</div>
                <div class="quick-link" onclick="openLink('https://drive.google.com')">Google Drive</div>
                <div class="quick-link" onclick="openLink('https://translate.google.com')">Google ç¿»è­¯</div>
                <div class="quick-link" onclick="openLink('https://www.youtube.com')">YouTube</div>
                <div class="quick-link" onclick="openLink('https://maps.google.com.tw')">Google åœ°åœ–</div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="card-icon">ğŸ’»</div>
                é–‹ç™¼è³‡æº
            </div>
            <div class="bookmark-section">
                <div class="bookmark-category">å‰ç«¯é–‹ç™¼</div>
                <div class="bookmark-link" onclick="openLink('https://developer.mozilla.org/')">MDN Web Docs</div>
                <div class="bookmark-link" onclick="openLink('https://stackoverflow.com/')">Stack Overflow</div>
                <div class="bookmark-link" onclick="openLink('https://codepen.io/')">CodePen</div>
                
                <div class="bookmark-category">è¨­è¨ˆéˆæ„Ÿ</div>
                <div class="bookmark-link" onclick="openLink('https://dribbble.com/')">Dribbble</div>
                <div class="bookmark-link" onclick="openLink('https://www.behance.net/')">Behance</div>
                <div class="bookmark-link" onclick="openLink('https://unsplash.com/')">Unsplash</div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="card-icon">ğŸ¬</div>
                å¨›æ¨‚èˆ‡ç”Ÿæ´»
            </div>
            <div class="bookmark-section">
                <div class="bookmark-link" onclick="openLink('https://www.sbs.com.au/ondemand/')">SBS On Demand</div>
                <div class="bookmark-link" onclick="openLink('https://www.netflix.com/')">Netflix</div>
                <div class="bookmark-link" onclick="openLink('https://www.tripadvisor.com.tw/')">TripAdvisor</div>
                <div class="bookmark-link" onclick="openLink('https://www.books.com.tw/')">åšå®¢ä¾†</div>
            </div>
        </div>
  </div> <div id="page-personal" class="page-content">
      <div class="card">
          <h2>å€‹äºº (å»ºç½®ä¸­)</h2>
          <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡æ”¾ä½ çš„å€‹äººè³‡æ–™æˆ–è¨­å®šã€‚</p>
      </div>
  </div>


  <div id="page-news" class="page-content">
      <div class="card">
          <h2>æ–°è (å»ºç½®ä¸­)</h2>
          <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡å»ºç½®æ›´å®Œæ•´çš„æ–°èç€è¦½åŠŸèƒ½ã€‚</p>
      </div>
  </div>


  <div id="page-map" class="page-content">
       <div class="card">
          <h2>åœ°åœ– (å»ºç½®ä¸­)</h2>
          <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡å»ºç½®æ›´å®Œæ•´çš„åœ°åœ–åŠŸèƒ½ã€‚</p>
      </div>
  </div>

  
  <div id="page-work" class="page-content">
      <div class="card">
          <h2>å·¥ä½œ (å»ºç½®ä¸­)</h2>
          <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡æ”¾ä½ çš„å¾…è¾¦äº‹é …æˆ–å·¥ä½œç›¸é—œé€£çµã€‚</p>
      </div>
  </div>

</div> <script>
// [ä¿ç•™] ä½ çš„è‚¡ç¥¨ API é‡‘é‘° (Alpha Vantage)
const ALPHA_VANTAGE_API_KEY = 'K09FCGY2Y90L99V0';

// æ—¥æœŸ (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
function updateDatetime() {
  const now = new Date();
  document.getElementById('datetime').textContent = now.toLocaleDateString('zh-TW',{
    year:'numeric', month:'long', day:'numeric',weekday:'long',hour:'2-digit',minute:'2-digit'
  });
}

// å¤©æ°£å‘¼å«API (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
const weatherCodes = {
  0:{emoji:'â˜€ï¸',desc:'æ™´å¤©'},1:{emoji:'ğŸŒ¤ï¸',desc:'æ™´æœ—'},2:{emoji:'â›…',desc:'å¤šé›²'},3:{emoji:'â˜ï¸',desc:'é™°å¤©'},
  45:{emoji:'ğŸŒ«ï¸',desc:'éœ§'},51:{emoji:'ğŸŒ¦ï¸',desc:'å°é›¨'},55:{emoji:'ğŸŒ§ï¸',desc:'å¤§é›¨'},61:{emoji:'ğŸŒ§ï¸',desc:'å°é›¨'},63:{emoji:'ğŸŒ§ï¸',desc:'ä¸­é›¨'},
  65:{emoji:'â›ˆï¸',desc:'å¤§é›¨'},80:{emoji:'ğŸŒ¦ï¸',desc:'é™£é›¨'},81:{emoji:'ğŸŒ§ï¸',desc:'é™£é›¨'},82:{emoji:'â›ˆï¸',desc:'å¤§é™£é›¨'},95:{emoji:'â›ˆï¸',desc:'é›·é›¨'},
  99:{emoji:'â›ˆï¸',desc:'å¼·é›·é›¨'}
};
function updateWeather(){
  const v=document.getElementById('locationSelector').value.split(',');
  const target=document.getElementById('weatherRow');
  target.innerHTML='<div class="weather-loading">è¼‰å…¥å¤©æ°£è³‡æ–™ä¸­...</div>';
  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${v[0]}&longitude=${v[1]}&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Asia/Taipei&forecast_days=7`)
  .then(r=>r.json()).then(d=>{
    let html='';
    const wd=['é€±æ—¥','é€±ä¸€','é€±äºŒ','é€±ä¸‰','é€±å››','é€±äº”','é€±å…­'];
    for(let i=0;i<7;i++){
      const date= new Date (d.daily.time[i]);
      const dayName = i===0 ?'ä»Šå¤©':wd[date.getDay()];
      const code = d.daily.weathercode[i];
      const w = weatherCodes[code] || { emoji:'ğŸŒ¤ï¸', desc:'å¤šé›²'};
      const tMax = Math.round(d.daily.temperature_2m_max[i]);
      const tMin = Math.round(d.daily.temperature_2m_min[i]);
      const rainProb = d.daily.precipitation_probability_max[i] || 0;
      html+=`<div class="weather-day-h"><div class="weather-date-h">${dayName}</div><span class="weather-emoji-h">${w.emoji}</span><div class="weather-temp-h">${tMin}Â° - ${tMax}Â°</div><div class="weather-rain-h">ğŸ’§ ${rainProb}%</div><div class="weather-desc-h">${w.desc}</div></div>`;
    }
    target.innerHTML=html;
  }).catch(() => {
    target.innerHTML='<div class="weather-loading">å¤©æ°£è³‡æ–™è¼‰å…¥å¤±æ•—</div>';
  });
}

// æœå°‹ (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
document.getElementById('searchBtn').onclick = () => {
  const val=document.getElementById('searchInput').value.trim();
  if(!val) return;
  if(val.includes('.') && !val.includes(' ')) {
    window.open(val.startsWith('http') ? val : 'https://' + val, '_blank');
  } else {
    window.open('https://www.google.com/search?q=' + encodeURIComponent(val), '_blank');
  }
};
document.getElementById('searchInput').addEventListener('keypress', e =>{
  if(e.key === 'Enter') document.getElementById('searchBtn').click();
});

// åœ°åœ– (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
function searchGoogleMaps() {
  const input = document.getElementById('mapSearchInput');
  const query = input.value.trim();
  if (!query) return;

  const mapFrame = document.getElementById('mapFrame');
  const newSrc = `https://maps.google.com/maps?q=${encodeURIComponent(query)}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
  mapFrame.src = newSrc;
}

// æ–°è (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
const RSS_FEEDS = {
    tw: [
        'https://news.ltn.com.tw/rss/all.xml',       // è‡ªç”±æ™‚å ± (é¦–é¸)
        'https://www.cna.com.tw/rsspolitics.xml',  // ä¸­å¤®é€šè¨Šç¤¾ (å‚™æ´)
    ],
    jp: [
        'https://www3.nhk.or.jp/rss/news/cat0.xml',    // NHK (é¦–é¸)
        'https://www.asahi.com/rss/asahi/newsheadlines.rdf' // æœæ—¥æ–°è (å‚™æ´)
    ],
    intl: [
        'http://feeds.bbci.co.uk/news/world/rss.xml' // BBC News
    ]
};
let currentNewsTab = 'tw'; 
function switchNewsTab(tab){
  currentNewsTab = tab;
  // [ä¿®æ”¹] ç¢ºä¿åªæ›´æ–°é¦–é ä¸Šçš„æ–°è tabs
  document.querySelectorAll('#page-home .news-tab').forEach(btn => btn.classList.remove('active'));
  document.getElementById('tab-'+tab).classList.add('active');
  loadNews(); 
}
function cleanCData(str) {
    if (str.startsWith('<![CDATA[') && str.endsWith(']]>')) {
        return str.substring(9, str.length - 3);
    }
    return str.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
}
function parseRSS(xmlText) {
    const articles = [];
    const maxArticles = 5;
    let items = [...xmlText.matchAll(/<item>([\s\S]*?)<\/item>/g)];
    if (items.length === 0) {
         items.push(...xmlText.matchAll(/<item [^>]+>([\s\S]*?)<\/item>/g));
    }
    if (items.length === 0) {
         items.push(...xmlText.matchAll(/<item[^>]+rdf:about="([^"]+)"[\s\S]*?<title>([\s\S]*?)<\/title>[\s\S]*?<\/item>/g));
         for (let i = 0; i < items.length && i < maxArticles; i++) {
             articles.push({
                 title: cleanCData(items[i][2]),
                 url: items[i][1],
                 source: { name: 'æœæ—¥æ–°è' }
             });
         }
         return articles;
    }
    for (let i = 0; i < items.length && i < maxArticles; i++) {
        const itemContent = items[i][1];
        const titleMatch = itemContent.match(/<title>([\s\S]*?)<\/title>/);
        const title = titleMatch ? cleanCData(titleMatch[1]) : 'ç„¡æ¨™é¡Œ';
        const linkMatch = itemContent.match(/<link>([\s\S]*?)<\/link>/);
        const link = linkMatch ? (linkMatch[1] || '#') : '#';
        let sourceName = null;
        const creatorMatch = itemContent.match(/<dc:creator>([\s\S]*?)<\/dc:creator>/);
        sourceName = creatorMatch ? cleanCData(creatorMatch[1]) : 'N/A';
        articles.push({ title: title, url: link.trim(), source: { name: sourceName } });
    }
    return articles;
}
async function loadNews(){
  const list = document.getElementById('newsList');
  if (!list) return; // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´  (ä¾‹å¦‚åœ¨å…¶ä»–åˆ†é )ï¼Œå°±é€€å‡º
  
  list.innerHTML = '<li class="news-loading">è¼‰å…¥æ–°èä¸­â€¦</li>';
  const refreshBtn = document.getElementById('refreshNewsBtn');
  if (refreshBtn) refreshBtn.disabled = true;

  const urlsToTry = RSS_FEEDS[currentNewsTab] || RSS_FEEDS['tw'];
  let success = false;

  for (const rssUrl of urlsToTry) {
      try {
          const proxyUrl = `https://api.codetabs.com/v1/proxy/?quest=${encodeURIComponent(rssUrl)}`;
          const res = await fetch(proxyUrl);
          if (!res.ok) throw new Error(`ä»£ç†ä¼ºæœå™¨éŒ¯èª¤ (ç‹€æ…‹: ${res.status})`);
          const xmlText = await res.text();
          const articles = parseRSS(xmlText);
          if (articles && articles.length > 0) {
              list.innerHTML = ''; 
              articles.forEach(article => {
                  let sourceName = article.source.name;
                  if (sourceName === 'N/A' || !sourceName) {
                    if (rssUrl.includes('cna.com')) sourceName = 'ä¸­å¤®é€šè¨Šç¤¾';
                    else if (rssUrl.includes('ltn.com')) sourceName = 'è‡ªç”±æ™‚å ±';
                    else if (rssUrl.includes('udn.com')) sourceName = 'è¯åˆæ–°èç¶²';
                    else if (rssUrl.includes('nhk.or.jp')) sourceName = 'NHK';
                    else if (rssUrl.includes('bbci.co.uk')) sourceName = 'BBC News';
                    else sourceName = 'RSS ä¾†æº';
                  }
                  list.insertAdjacentHTML('beforeend', `
                    <li class="news-item" onclick="window.open('${article.url}','_blank')">
                      <div class="news-item-title">${article.title || 'ç„¡æ¨™é¡Œ'}</div>
                      <div class="news-item-meta">
                        <span>${sourceName}</span>
                      </div>
                    </li>`);
              });
              success = true;
              break; 
          } else {
              throw new Error('RSS å…§å®¹ç‚ºç©ºæˆ–ç„¡æ³•è§£æ');
          }
      } catch(e) {
          console.warn(`RSS ä¾†æº ${rssUrl} å¤±æ•—: ${e.message}`);
      }
  }
  if (!success) {
      list.innerHTML = `<li class="news-loading">æ–°èè¼‰å…¥å¤±æ•—: æ‰€æœ‰å‚™æ´ä¾†æºå‡å˜—è©¦å¤±æ•—ã€‚</li>`;
  }
  if (refreshBtn) refreshBtn.disabled = false;
}

// è‚¡ç¥¨å€ (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
const stockWatchlist = {
  tw: ['2330','2317','2454','2603','0050'],
  us: ['AAPL','GOOGL','TSLA','NVDA','MSFT']
};
let stockCurrentMarket = 'tw';
function switchStockMarket(market){
  stockCurrentMarket=market;
  document.querySelectorAll('.stock-tab').forEach(b => b.classList.remove('active'));
  document.getElementById('stockTab_' + market).classList.add('active');
  loadStocks();
}
async function loadStocks(){
  const container = document.getElementById('stocksList');
  if (!container) return; // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´  (ä¾‹å¦‚åœ¨å…¶ä»–åˆ†é )ï¼Œå°±é€€å‡º
  
  const watchlist = stockWatchlist[stockCurrentMarket];
  container.innerHTML = '<div class="stocks-loading">è¼‰å…¥è‚¡ç¥¨è³‡æ–™ä¸­â€¦</div>';
  if(stockCurrentMarket==='tw'){
    container.innerHTML = '';
    for(const symbol of watchlist){
      try{
        const res = await fetch(`https://api.codetabs.com/v1/proxy/?quest=https://mis.twse.com.tw/stock/api/getStockInfo.jsp?ex_ch=tse_${symbol}.tw&json=1&delay=0`);
        const data = await res.json();
        if(data.msgArray && data.msgArray.length > 0) {
          const st = data.msgArray[0];
          const price = parseFloat(st.z) || 0;
          const prevClose = parseFloat(st.y) || price;
          const change = price - prevClose;
          const changePercent = prevClose!==0 ? (change/prevClose)*100 : 0;
          const c = change>0 ? 'stock-up' : change<0 ? 'stock-down' : 'stock-neutral';
          container.insertAdjacentHTML('beforeend', `
            <div class="stock-item">
              <div class="stock-info">
                <div class="stock-symbol">${symbol}</div>
                <div class="stock-name">${st.n||symbol}</div>
              </div>
              <div class="stock-price-info">
                <div class="stock-price ${c}">$${price.toFixed(2)}</div>
                <div class="stock-change ${c}">${change>0?'+':''}${change.toFixed(2)} (${changePercent>0?'+':''}${changePercent.toFixed(2)}%)</div>
              </div>
            </div>`);
        } else {
          container.insertAdjacentHTML('beforeend', `<div class="stock-item">ç„¡æ³•å–å¾— ${symbol} è³‡è¨Š</div>`);
        }
      }catch(e){
        container.insertAdjacentHTML('beforeend', `<div class="stock-item">è¼‰å…¥ ${symbol} å¤±æ•—</div>`);
      }
    }
  } else {
    container.innerHTML = '';
    for(const symbol of watchlist){
      try{
        const url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${ALPHA_VANTAGE_API_KEY}`;
        const response = await fetch(url);
        const data = await response.json();
        if(data['Global Quote']){
          const q = data['Global Quote'];
          const price = parseFloat(q["05. price"]) || 0;
          const change = parseFloat(q["09. change"]) || 0;
          const changePercent = parseFloat(q["10. change percent"]?.replace('%','')) || 0;
          const c = change > 0 ? 'stock-up' : change < 0 ? 'stock-down' : 'stock-neutral';
          container.insertAdjacentHTML('beforeend', `
            <div class="stock-item">
              <div class="stock-info">
                <div class="stock-symbol">${symbol}</div>
                <div class="stock-name">${q["01. symbol"]||symbol}</div>
              </div>
              <div class="stock-price-info">
                <div class="stock-price ${c}">$${price.toFixed(2)}</div>
                <div class="stock-change ${c}">${change>0?'+':''}${change.toFixed(2)} (${changePercent>0?'+':''}${changePercent.toFixed(2)}%)</div>
              </div>
            </div>`);
        } else {
          container.insertAdjacentHTML('beforeend', `<div class="stock-item">ç„¡æ³•å–å¾— ${symbol} è³‡è¨Š</div>`);
        }
      }catch(e){
        container.insertAdjacentHTML('beforeend', `<div class="stock-item">è¼‰å…¥ ${symbol} å¤±æ•—</div>`);
      }
      await delay(1400); 
    }
  }
}
function delay(ms){return new Promise(r=>setTimeout(r,ms));} 
document.getElementById('stockAddBtn').onclick = () => {
  const input=document.getElementById('stockInput');
  let symbol=input.value.trim().toUpperCase();
  if(!symbol) return alert('è«‹è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼');
  if (stockCurrentMarket === 'tw') {
      const twSymbol = symbol.match(/\d+/);
      if (twSymbol) { symbol = twSymbol[0]; }
  }
  const list=stockWatchlist[stockCurrentMarket];
  if(list.includes(symbol)) return alert('è‚¡ç¥¨å·²åœ¨æ¸…å–®');
  if(list.length >= 7) return alert('æœ€å¤šåªèƒ½è¿½è¹¤7æ”¯è‚¡ç¥¨');
  list.push(symbol);
  input.value = '';
  loadStocks();
};

// [ä¿ç•™] ä½ çš„ openLink å‡½å¼
function openLink(url) {
    window.open(url, '_blank');
}


// ========================================================
// [æ–°åŠŸèƒ½] åˆ†é åˆ‡æ›çš„ JS é‚è¼¯
// ========================================================
function initTabNavigation() {
    const tabs = document.querySelectorAll('.portal-tab-btn');
    const pages = document.querySelectorAll('.page-content');

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const pageName = tab.dataset.page; // e.g., "home"
            
            // 1. æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            tabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            
            // 2. åˆ‡æ›é é¢å…§å®¹
            pages.forEach(page => {
                if (page.id === 'page-' + pageName) {
                    page.style.display = 'block';
                } else {
                    page.style.display = 'none';
                }
            });
        });
    });
}
// ========================================================
// (åˆ†é  JS çµæŸ)
// ========================================================


// --- ç¨‹å¼ç¢¼é–‹å§‹åŸ·è¡Œ ---
document.addEventListener('DOMContentLoaded', () => {
    // 1. ç¶å®šåˆ†é åˆ‡æ›
    initTabNavigation();
    
    // 2. åˆå§‹è¼‰å…¥ "é¦–é " çš„æ‰€æœ‰åŠŸèƒ½
    updateDatetime();
    updateWeather(); 
    switchStockMarket('tw');
    switchNewsTab('tw');
    
    // 3. ç¶å®šé¦–é ä¸Šçš„æ‰€æœ‰æŒ‰éˆ•
    // (å¤©æ°£)
    document.getElementById('locationSelector').onchange = updateWeather;
    // (æ–°è)
    document.getElementById('tab-tw').onclick = () => switchNewsTab('tw');
    document.getElementById('tab-jp').onclick = () => switchNewsTab('jp');
    document.getElementById('tab-intl').onclick = () => switchNewsTab('intl');
    document.getElementById('refreshNewsBtn').onclick = loadNews;
    // (è‚¡ç¥¨)
    document.getElementById('stockTab_tw').onclick = () => switchStockMarket('tw');
    document.getElementById('stockTab_us').onclick = () => switchStockMarket('us');
    // (åœ°åœ–)
    document.getElementById('mapSearchBtn').onclick = searchGoogleMaps;
    document.getElementById('mapSearchInput').addEventListener('keypress', e => {
      if (e.key === 'Enter') searchGoogleMaps();
    });
});
</script>
</body>
</html>
