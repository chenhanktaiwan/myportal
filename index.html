<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å€‹äººå…¥å£ç¶²ç«™ - [V5 æœ€çµ‚é‚„åŸç‰ˆ]</title>
<style>
Â  /* [ä¿®æ”¹] ç·Šæ¹Šç‰ˆ CSS (ä¿ç•™) */
Â  * {margin:0;padding:0;box-sizing:border-box;}
Â  body {
Â  Â  font-family:'Microsoft JhengHei','PingFang TC',sans-serif;
Â  Â  background:linear-gradient(135deg,#dde9e7 0,#c9dbd9 100%);
Â  Â  color:#526c67;
Â  Â  min-height:100vh;
Â  Â  padding:20px;
Â  Â  padding-top: 70px;Â Â 
Â  }
Â  .container {max-width:1400px;margin:0 auto;}
Â 
Â  /* [å·²é‚„åŸ] ä½ çš„å¤©æ°£å€å¡Š CSS (ä½¿ç”¨ç·Šæ¹Šç‰ˆ) */
Â  .header {
Â  Â  background:linear-gradient(135deg,#7ba8a3 0,#9dbfbb 100%);
Â  Â  padding: 20px 32px; /* [ä¿®æ”¹] æ¸›å°‘å‚ç›´ padding */
Â  Â  border-radius:24px;
Â  Â  color:white;
Â  Â  margin-bottom: 24px;
Â  Â  box-shadow:0 8px 30px rgba(123,168,163,0.25);
Â  Â Â 
Â  Â  /* --- [æ–°åŠŸèƒ½] ä¿®æ”¹ç‚º Flex æ’ç‰ˆ --- */
Â  Â  display: flex;
Â  Â  justify-content: space-between;
Â  Â  align-items: center;
Â  Â  gap: 20px;
Â  Â  /* --- [æ–°åŠŸèƒ½] çµæŸ --- */
Â  }
Â Â 
Â  /* [åˆªé™¤] .header-top å·²ä¸éœ€è¦ */
Â Â 
Â  .greeting-section {
Â  Â  Â  font-weight:700;Â 
Â  Â  Â  font-size: 24px;
Â  Â  Â  flex-shrink: 0; /* [ä¿®æ”¹] ç¢ºä¿ "æ­¡è¿" æ–‡å­—ä¸è¢«å£“ç¸® */
Â  }
Â  .datetime {margin-top:6px; font-weight:500; font-size:14px; opacity:0.9;}
Â Â 
Â  .location-selector {
Â  Â  background:rgba(255 255 255 / 26%);
Â  Â  border:2px solid rgba(255 255 255 / 38%);
Â  Â  border-radius:10px;
Â  Â  font-size:13px;
Â  Â  color:white;
Â  Â  padding: 5px 10px;
Â  Â  cursor:pointer;
Â  Â  backdrop-filter:blur(12px);
Â  Â  transition:background 0.3s,border 0.3s;
Â  }
Â  .location-selector:hover, .location-selector:focus {
Â  Â  background:rgba(255 255 255 / 34%);
Â  Â  border-color:rgba(255 255 255 / 60%);
Â  Â  outline:none;
Â  }
Â Â 
Â  /* --- [ä¿®æ”¹] å¤©æ°£å€å¡Šé‡æ’ --- */
Â  .weather-forecast-horizontal {
Â  Â  display:grid;
Â  Â  gap: 10px; /* [ä¿®æ”¹] ç¸®å° gap */
Â  Â  grid-template-columns:repeat(7,1fr);
Â  Â  flex: 1; /* [æ–°] è®“å¤©æ°£å€å¡Šä½”æ“šä¸­é–“çš„å½ˆæ€§ç©ºé–“ */
Â  }
Â  .weather-day-h {
Â  Â  background:rgba(255 255 255 / 23%);
Â  Â  border-radius:14px;
Â  Â  padding: 10px 8px 8px; /* [ä¿®æ”¹] ç¸®å° padding */
Â  Â  border:2px solid rgba(255 255 255 / 12%);
Â  Â  text-align:center;
Â  }
Â  .weather-date-h {font-size:12px; font-weight:700; margin-bottom:4px;}
Â  .weather-emoji-h {font-size:28px; margin-bottom:2px; display:block; user-select:none;}
Â  .weather-temp-h {font-size:14px; font-weight:700;}
Â  .weather-rain-h {font-size:11px; margin-top:3px; color:#def1f0aa;}
Â  .weather-desc-h {font-size:11px; margin-top:1px; color:#d0e2e0aa;}
Â  .weather-loading {
Â  Â  grid-column:span 7;
Â  Â  text-align:center;
Â  Â  padding:10px 0; /* [ä¿®æ”¹] ç¸®å° padding */
Â  Â  color:white;
Â  Â  font-weight:700;
Â  Â  font-size: 14px; /* [ä¿®æ”¹] ç¸®å°å­—é«” */
Â  }
Â  /* --- [ä¿®æ”¹] å¤©æ°£å€å¡ŠçµæŸ --- */
Â 
Â  /* æœå°‹åˆ— (ç·Šæ¹Šç‰ˆ) */
Â  .search-section {
Â  Â  display:flex;Â Â 
Â  Â  gap:10px;
Â  Â  margin-bottom: 20px;Â Â 
Â  }
Â  .search-input {
Â  Â  flex:1;
Â  Â  font-size: 14px;Â Â 
Â  Â  border-radius:12px;Â Â 
Â  Â  padding: 10px 16px;Â Â 
Â  Â  border:2px solid #a3bbb9;
Â  Â  transition:all 0.3s ease;
Â  Â  font-weight:400;
Â  }
Â  .search-input:focus {
Â  Â  outline:none;
Â  Â  border-color:#7ba8a3;
Â  Â  box-shadow:0 0 0 4px rgba(123 168 163 / 0.2);
Â  }
Â  .search-btn {
Â  Â  background-color:#7ba8a3;
Â  Â  border-radius:12px;Â Â 
Â  Â  border:none;
Â  Â  color:white;
Â  Â  font-size: 14px;Â Â 
Â  Â  font-weight:700;
Â  Â  cursor:pointer;
Â  Â  padding: 10px 20px;Â Â 
Â  Â  transition:background-color 0.35s ease;
Â  }
Â  .search-btn:hover {background-color:#618577;}

Â  /* å¡ç‰‡å€ (ç·Šæ¹Šç‰ˆ) */
Â  .info-section {
Â  Â  display:flex;
Â  Â  gap: 20px;Â Â 
Â  Â  flex-wrap:wrap;
Â  }
Â  .news-card {
Â  Â  flex:1;
Â  Â  min-width:400px;Â Â 
Â  Â  max-width:720px;
Â  Â  background:white;
Â  Â  border-radius:20px;
Â  Â  box-shadow:0 8px 32px #a6b7b68e;
Â  Â  padding: 16px 20px;Â Â 
Â  }
Â  .section-header {
Â  Â  display:flex;
Â  Â  justify-content:space-between;
Â  Â  align-items:center;
Â  Â  margin-bottom:10px;Â Â 
Â  Â  flex-wrap:wrap;
Â  Â  gap:10px;
Â  }
Â  .section-title {
Â  Â  display:flex;
Â  Â  gap:8px;
Â  Â  font-weight:700;
Â  Â  font-size: 18px;Â Â 
Â  Â  color:#578f89;
Â  Â  align-items:center;
Â  }
Â  .section-icon {
Â  Â  background:linear-gradient(135deg,#7ba8a3,#9dbfbb);
Â  Â  border-radius:8px;
Â  Â  color:white;
Â  Â  width: 28px;Â Â 
Â  Â  height: 28px;Â Â 
Â  Â  display:grid;
Â  Â  place-items:center;
Â  Â  font-weight:900;
Â  Â  font-size: 15px;Â Â 
Â  }
Â  .news-tabs {
Â  Â  display:flex;
Â  Â  gap: 8px;Â Â 
Â  }
Â  .news-tab {
Â  Â  border-radius:10px;Â Â 
Â  Â  background:#f3fbfb;
Â  Â  color:#578f89;
Â  Â  font-weight:600;
Â  Â  font-size: 13px;Â Â 
Â  Â  padding: 5px 14px;Â Â 
Â  Â  border:2px solid #cee2df;
Â  Â  cursor:pointer;
Â  Â  transition:background-color 0.3s ease,border-color 0.3s ease;
Â  Â  user-select:none;
Â  }
Â  .news-tab.active,.news-tab:hover {
Â  Â  background:#7ba8a3;
Â  Â  border-color:#7ba8a3;
Â  Â  color:white;
Â  }
Â  .refresh-btn {
Â  Â  font-weight:600;
Â  Â  background:#7ba8a3;
Â  Â  color:white;
Â  Â  border:none;
Â  Â  border-radius:10px;Â Â 
Â  Â  padding: 5px 14px;Â Â 
Â  Â  cursor:pointer;
Â  Â  font-size: 13px;Â Â 
Â  Â  transition:background-color 0.3s ease;
Â  }
Â  .refresh-btn:disabled {opacity:0.5; cursor:not-allowed;}
Â  .news-list {
Â  Â  list-style:none;
Â  Â  max-height: 400px;Â Â 
Â  Â  overflow-y:auto;
Â  Â  padding:0;
Â  }
Â  .news-item {
Â  Â  border-left:4px solid #86b4a9;
Â  Â  margin-bottom: 6px;Â Â 
Â  Â  background:#f1f7f5;
Â  Â  border-radius:10px;
Â  Â  padding: 10px 14px;Â Â 
Â  Â  font-weight:600;
Â  Â  color:#3a6259;
Â  Â  cursor:pointer;
Â  Â  transition:background 0.3s ease;
Â  }
Â  .news-item:hover {
Â  Â  background:#9ac2b9;
Â  Â  color:white;
Â  }
Â  .news-item-title {
Â  Â  font-size: 14px;Â Â 
Â  Â  margin-bottom: 4px;Â Â 
Â  }
Â  .news-item-meta {
Â  Â  margin-top:4px;
Â  Â  font-weight:400;
Â  Â  font-size:12px;
Â  Â  color:#58716b;
Â  Â  display:flex;
Â  Â  justify-content:space-between;
Â  }
Â  .news-loading {text-align:center;padding:20px;color:#7a9794;font-weight:600;}
Â  /* è‚¡ç¥¨å¡ (ç·Šæ¹Šç‰ˆ) */
Â  .stock-card {
Â  Â  flex-basis:360px;Â Â 
Â  Â  background:white;
Â  Â  border-radius:20px;
Â  Â  padding: 16px 20px;Â Â 
Â  Â  box-shadow:0 8px 30px #a2b8b39e;
Â  Â  display:flex;
Â  Â  flex-direction:column;
Â  Â  gap: 12px;Â Â 
Â  }
Â  .stock-tabs {
Â  Â  display:flex;
Â  Â  gap:10px;
Â  Â  margin-top: 2px;
Â  }
Â  .stock-tab {
Â  Â  padding: 6px 20px;Â Â 
Â  Â  border-radius:10px;
Â  Â  border:2px solid #a6cdc5;
Â  Â  background:#ccede9;
Â  Â  font-size: 15px;Â Â 
Â  Â  font-weight:700;
Â  Â  color:#3e7e72;
Â  Â  cursor:pointer;
Â  Â  transition:all 0.28s ease;
Â  Â  user-select:none;
Â  }
Â  .stock-tab.active, .stock-tab:hover {
Â  Â  border-color:#7ba8a3;
Â  Â  background:#7ba8a3;
Â  Â  color:white;
Â  }
Â  .stock-search {
Â  Â  display:flex;
Â  Â  gap: 8px;Â Â 
Â  }
Â  .stock-search-input {
Â  Â  padding: 10px 14px;Â Â 
Â  Â  border-radius:12px;
Â  Â  font-size: 14px;Â Â 
Â  Â  font-weight:600;
Â  Â  border:2px solid #a1d1c4;
Â  Â  background:#dbece8;
Â  Â  color:#376655;
Â  Â  flex:1;
Â  Â  transition:border-color 0.3s ease;
Â  }
Â  .stock-search-input:focus {
Â  Â  outline:none;
Â  Â  border-color:#7ba8a3;
Â  }
Â  .stock-add-btn {
Â  Â  background:#7ba8a3;
Â  Â  border-radius:12px;
Â  Â  padding: 10px 20px;Â Â 
Â  Â  cursor:pointer;
Â  Â  font-size: 14px;s
Â  Â  font-weight:700;
Â  Â  color:white;
Â  Â  border:none;
Â  Â  transition:background-color 0.3s ease;
Â  }
Â  .stock-add-btn:hover {
Â  Â  background:#628775;
Â  }
Â  .stock-list {
Â  Â  max-height:400px;
Â  Â  overflow-y:auto;
Â  Â  display:flex;
Â  Â  flex-direction:column;
Â  Â  gap: 8px;Â Â 
Â  }
Â  .stock-item {
Â  Â  background:#cee3db;
Â  Â  border-radius:12px;
Â  Â  padding: 10px 14px;Â Â 
Â  Â  display:flex;
Â  Â  justify-content:space-between;
Â  Â  align-items:center;
Â  Â  gap:10px;
Â  Â  cursor:pointer;
Â  Â  transition:background-color 0.3s ease;
Â  Â  font-weight:700;
Â  Â  color:#3c786c;
Â  }
Â  .stock-item:hover {
Â  Â  background:#7ba8a3;
Â  Â  color:white;
Â  }
Â  .stock-info {
Â  Â  display:flex;
Â  Â  flex-direction:column;
Â  Â  gap: 3px;Â Â 
Â  Â  text-align:left;
Â  Â  min-width: 6rem;
Â  }
Â  .stock-symbol {
Â  Â  font-size: 1.1rem;Â Â 
Â  }
Â  .stock-name {
Â  Â  font-weight:400;
Â  Â  font-size: 0.8rem;Â Â 
Â  Â  color:#4a655c;
Â  }
Â  .stock-price-info {
Â  Â  text-align:right;
Â  Â  min-width:7rem;
Â  }
Â  .stock-price {
Â  Â  font-size: 1.2rem;Â Â 
Â  }
Â  .stock-change {
Â  Â  font-size: 0.85rem;Â Â 
Â  }
Â  .stock-up {
Â  Â  color:#e2646a;
Â  }
Â  .stock-down {
Â  Â  color:#2e7052;
Â  }
Â  .stock-neutral {
Â  Â  color:#50766e;
Â  }

Â  /* ä½ çš„ CSS æ¨£å¼ (å·²ä¿®æ”¹ç‚º "ç·Šæ¹Š" ç‰ˆæœ¬) */
Â  .main-content {
Â  Â  display: grid;
Â  Â  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));Â Â 
Â  Â  gap: 20px;Â Â 
Â  Â  margin-top: 20px;Â Â 
Â  }
Â  .card {
Â  Â  background: white;
Â  Â  border-radius: 20px;
Â  Â  box-shadow: 0 8px 30px #a2b8b36e;
Â  Â  padding: 16px 20px;Â Â 
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  gap: 12px;
Â  }
Â  .card-title {
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 10px;Â Â 
Â  Â  font-weight: 700;
Â  Â  font-size: 16px;Â Â 
Â  Â  color: #578f89;
Â  Â  border-bottom: 2px solid #e0ebea;
Â  Â  padding-bottom: 8px;Â Â 
Â  }
Â  .card-icon {
Â  Â  font-size: 15px;Â Â 
Â  }
Â  .project-item {
Â  Â  background: #f1f7f5;
Â  Â  border-radius: 12px;
Â  Â  padding: 12px 16px;Â Â 
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s, box-shadow 0.3s;
s }
Â  .project-item:hover {
Â  Â  background: #e6f0ee;
Â  Â  box-shadow: 0 4px 12px #b8cac7;
Â  }
Â  .project-name { font-weight: 700; color: #3a6259; margin-bottom: 4px; font-size: 15px; }Â Â 
Â  .project-desc { font-size: 13px; color: #58716b; }Â Â 
Â  .tool-item {
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 12px;Â Â 
Â  Â  background: #f1f7f5;
Â  Â  padding: 10px;Â Â 
Â  Â  border-radius: 12px;
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s;
Â  }
Â  .tool-item:hover { background: #e6f0ee; }
Â  .tool-icon {
Â  Â  width: 36px;Â Â 
Â  Â  height: 36px;Â Â 
Â  Â  border-radius: 10px;
Â  Â  display: grid;
Â  Â  place-items: center;
Â  Â  background: #cce3db;
Â  Â  color: #3e7e72;
Â  Â  font-weight: 700;
Â  }
Â  .tool-info { flex: 1; }
Â  .tool-name { font-weight: 700; color: #3a6259; font-size: 15px; }Â Â 
Â  .tool-url { font-size: 13px; color: #58716b; }Â Â 
Â  .link-grid {
Â  Â  display: grid;
Â  Â  grid-template-columns: 1fr 1fr;
Â  Â  gap: 8px;Â Â 
Â  }
Â  .quick-link {
Â  Â  background: #f1f7f5;
Â  Â  padding: 10px 14px;Â Â 
Â  Â  border-radius: 12px;
Â  Â  font-weight: 600;
Â  Â  color: #3a6259;
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s;
Â  }
Â  .quick-link:hover { background: #e6f0ee; }
Â  .bookmark-section { display: flex; flex-direction: column; gap: 8px; }Â Â 
Â  .bookmark-category {
Â  Â  font-weight: 700;
Â  Â  color: #3e7e72;
Â  Â  margin-top: 6px;Â Â 
Â  }
Â  .bookmark-link {
Â  Â  padding-left: 10px;Â Â 
Â  Â  border-left: 3px solid #cce3db;
Â  Â  font-weight: 600;
Â  Â  color: #3a6259;
Â  s cursor: pointer;
Â  }
Â  .bookmark-link:hover { color: #7ba8a3; }

Â  /* åœ°åœ– CSS (ç·Šæ¹Šç‰ˆ) */
Â  .map-card-full {
Â  Â  background: white;
Â  Â  border-radius: 20px;
Â  Â  box-shadow: 0 8px 32px #a6b7b68e;
Â  Â  padding: 16px 20px;Â Â 
Â  Â  margin-top: 20px;Â Â 
Â  }
Â  .map-card-full .section-header {
Â  Â  gap: 16px;Â Â 
Â  }
Â  .map-search-box {
Â  Â  display: flex;
Â  Â  flex: 1;Â Â 
Â  Â  gap: 10px;
Â  Â  min-width: 250px;Â Â 
Â  Â  max-width: 600px;Â Â 
Â  }
Â  .map-content {
Â  Â  margin-top: 12px;Â Â 
Â  }
Â  .map-content iframe {
Â  Â  border-radius: 12px;
Â  Â  border: 2px solid #cee2df;Â Â 
Â  Â  width: 100%;
Â  Â  height: 350px;Â Â 
Â  }

Â  /* --- [æ–°åŠŸèƒ½] ç½®é ‚å°è¦½åˆ— å’Œ åˆ†é  CSS (ç·Šæ¹Šç‰ˆ) --- */
Â  .portal-nav-sticky {
Â  Â  position: sticky;
Â  Â  top: 20px; /* é…åˆ body çš„ padding */
Â  Â  z-index: 1000;
Â  Â 
Â  Â  background:linear-gradient(135deg,#7ba8a3 0,#9dbfbb 100%);
Â  Â  padding: 12px 24px; /* [ä¿®æ”¹] */
Â  Â  border-radius: 20px; /* [ä¿®æ”¹] */
Â  Â  box-shadow: 0 8px 30px rgba(123, 168, 163, 0.35);
Â  Â 
Â  Â  max-width: 1400px;Â Â 
Â  Â  margin: -50px auto 0 auto;
Â  Â  top: 20px;
Â  Â 
Â  Â  /* [å·²é‚„åŸ] å°è¦½åˆ—å·¦å³å°é½Š */
Â  Â  display: flex;
Â  Â  justify-content: space-between;
Â  s align-items: center;
Â  }
Â 
Â  .portal-tabs {
Â  Â  display: flex;
Â  Â  gap: 10px; /* [ä¿®æ”¹] */
Â  Â  justify-content: flex-start; /* [ä¿®æ”¹] é å·¦ */
Â  }
Â 
Â  .portal-tab-btn {
Â  Â  font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
Â  Â  border-radius: 10px; /* [ä¿®æ”¹] */
Â  Â  background: rgba(255, 255, 255, 0.23);
Â  Â  border: 2px solid rgba(255, 255, 255, 0.12);
Â  Â  color: white;
Â  Â  font-weight: 700;
Â  Â  font-size: 15px; /* [ä¿®æ”¹] */
Â  Â  padding: 6px 16px; /* [ä¿®æ”¹] */
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s ease, border-color 0.3s ease;
Â  Â  user-select: none;
Â  }
Â 
Â  .portal-tab-btn.active, .portal-tab-btn:hover {
Â  Â  background: white;
Â  Â  border-color: white;
Â  Â  color: #7ba8a3; /* é»é¸å¾Œè®Šç‚ºä¸»é¡Œç¶ è‰² */
Â  }
Â 
Â  /* [å·²é‚„åŸ] å°è¦½åˆ—å³å´è³‡è¨Š */
Â  .nav-info-right {
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 16px;Â Â 
Â  Â  color: white;
Â  }
Â  .nav-datetime {
Â  Â  font-size: 13px;Â Â 
Â  Â  font-weight: 500;
Â  Â  opacity: 0.9;
Â  }
Â  .nav-weather {
Â  Â  font-size: 14px;Â Â 
Â  Â  font-weight: 700;
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 5px;
Â  }
Â  .nav-weather-emoji {
Â  Â  font-size: 20px;Â Â 
Â  }
Â 
Â  /* [ä¿®æ”¹] é¦–é  location-selector (åœ¨å°è¦½åˆ—ä¸­) */
Â  .nav-info-right .location-selector {
Â  Â  padding: 4px 8px; /* [ä¿®æ”¹] æ›´ç·Šæ¹Š */
Â  Â  font-size: 13px;
Â  }

Â  /* åˆ†é å…§å®¹ */
Â  .page-content {
Â  Â  display: none;
Â  Â  margin-top: 20px; /* [ä¿®æ”¹] */
Â  }
Â 
Â  .page-content.active {
Â  Â  display: block;
Â  }
Â  /* --- [æ–°åŠŸèƒ½] CSS çµæŸ --- */


Â  /* ================================================
Â  Â  Â â–¼â–¼â–¼ ä¿®æ”¹é» 1 (CSS)ï¼šåœ¨é€™è£¡åŠ å…¥æ–°çš„ CSS è¦å‰‡ â–¼â–¼â–¼
Â  Â  Â ================================================
Â  Â */

Â  /* --- [æ–°åŠŸèƒ½] å·¥ä½œæ·å¾‘ CSS --- */
Â  .shortcut-grid {
Â  Â  Â  display: grid;
Â  Â  Â  /* auto-fill: ç›¡å¯èƒ½å¤šæ”¾ï¼Œä¿æŒå›ºå®šå¯¬åº¦
Â  Â  Â  Â  Â minmax(90px, 1fr): æ¯å€‹é …ç›®æœ€å° 90pxï¼Œæœ€å¤§ 1fr (å‡åˆ†)
Â  Â  Â  Â */
Â  Â  Â  grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
Â  Â  Â  gap: 20px; /* é …ç›®ä¹‹é–“çš„é–“è· */
Â  Â  Â  padding: 10px 0;
Â  }
Â 
Â  .shortcut-item, .shortcut-add-btn {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column; /* å‚ç›´æ’åˆ— (åœ–ç¤ºåœ¨ä¸Š, æ–‡å­—åœ¨ä¸‹) */
Â  Â  Â  align-items: center;Â  Â  /* æ°´å¹³ç½®ä¸­ */
Â  Â  Â  gap: 8px;Â  Â  Â  Â  Â  Â  Â  /* åœ–ç¤ºå’Œæ–‡å­—çš„é–“è· */
Â  Â  Â  cursor: pointer;
Â  Â  Â  text-decoration: none;
Â  Â  Â  color: #3a6259;Â  Â  Â  /* ç¹¼æ‰¿å¡ç‰‡æ–‡å­—é¡è‰² */
Â  Â  Â  transition: transform 0.2s ease;
Â  }
Â 
Â  .shortcut-item:hover {
Â  Â  Â  transform: translateY(-3px); /* æ»‘é¼ æ‡¸åœæ™‚è¼•å¾®ä¸Šç§» */
Â  }
Â 
Â  .shortcut-icon {
Â  Â  Â  width: 64px;
Â  Â  Â  height: 64px;
Â  Â  Â  border-radius: 16px; /* åœ“è§’ç™½åº• */
Â  Â  Â  background: white;
Â  Â  Â  box-shadow: 0 4px 12px rgba(162, 184, 179, 0.5);
Â  Â  Â  display: grid;
Â  Â  Â  place-items: center;
Â  Â  Â  overflow: hidden; /* ç¢ºä¿åœ–ç‰‡ä¹Ÿåœ¨åœ“è§’å…§ */
Â  Â  Â  border: 2px solid white;Â Â 
Â  }
Â 
Â  .shortcut-icon img {
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  object-fit: cover; /* ç¢ºä¿åœ–ç¤ºå¡«æ»¿ */
Â  }

Â  /* [Fallback] åœ–ç‰‡è¼‰å…¥å¤±æ•—æ™‚çš„æ–‡å­— */
Â  .shortcut-icon .fallback-initial {
Â  Â  Â  font-size: 28px;
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: #7ba8a3;
Â  Â  Â  user-select: none;
Â  }
Â 
Â  .shortcut-name {
Â  Â  Â  font-size: 13px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  text-align: center;
Â  Â  Â  /* è™•ç†é•·æ–‡å­—ï¼Œæœ€å¤šé¡¯ç¤º 2 è¡Œ */
Â  Â  Â  word-break: break-all;
Â  Â  Â  display: -webkit-box;
Â  Â  Â  -webkit-line-clamp: 2;
Â  Â  Â  -webkit-box-orient: vertical;
Â  Â  Â  overflow: hidden;
Â  }
Â 
Â  /* "æ–°å¢" æŒ‰éˆ•çš„ç‰¹æ®Šæ¨£å¼ */
Â  .shortcut-add-btn .shortcut-icon {
Â  Â  Â  background: #f1f7f5; /* ä½¿ç”¨å¡ç‰‡å…§çš„æ·ºè‰²èƒŒæ™¯ */
Â  Â  Â  border: 2px dashed #a3bbb9; /* è™›ç·šé‚Šæ¡† */
Â  Â  Â  box-shadow: none;
Â  Â  Â  color: #7a9794;
Â  Â  Â  transition: all 0.3s ease;
Â  }
Â 
Â  .shortcut-add-btn .shortcut-icon-add {
Â  Â  Â  font-size: 32px;
Â  Â  Â  font-weight: 300;
s }
Â 
Â  .shortcut-add-btn:hover .shortcut-icon {
Â  Â  Â  background: #e6f0ee;
Â  Â  Â  border-color: #7ba8a3;
Â  Â  Â  color: #7ba8a3;
Â  }
Â  /* --- [æ–°åŠŸèƒ½] CSS çµæŸ --- */


</style>
</head>
<body>
<div class="container">

Â  <div class="portal-nav-sticky">
Â  Â  <div class="portal-tabs">
Â  Â  Â  Â  <button class="portal-tab-btn active" data-page="home">é¦–é </button>
Â  Â  Â  Â  <button class="portal-tab-btn" data-page="personal">å€‹äºº</button>
Â  Â  Â  Â  <button class="portal-tab-btn" data-page="news">æ–°è</button>
Â  Â  Â  Â  <button class="portal-tab-btn" data-page="map">åœ°åœ–</button>
Â  Â  Â  Â  <button class="portal-tab-btn" data-page="work">å·¥ä½œ</button>
Â  Â  </div>
Â  Â 
Â  Â  <div class="nav-info-right">
Â  Â  Â  Â  <select id="locationSelectorNav" class="location-selector" aria-label="é¸æ“‡åŸå¸‚">
Â  Â  Â  Â  Â  <option value="25.0330,121.5654">å°åŒ—å¸‚</option>
Â  Â  Â  Â  Â  <option value="24.1477,120.6736">å°ä¸­å¸‚</option>
Â  Â  Â  Â  Â  <option value="22.6273,120.3014">é«˜é›„å¸‚</option>
Â  Â  Â  Â  Â  <option value="25.0375,121.4252">æ–°åŒ—å¸‚</option>
Â  Â  Â  Â  Â  <option value="24.8138,120.9675">æ–°ç«¹å¸‚</option>
Â  Â  Â  Â  Â  <option value="24.9936,121.3010">æ¡ƒåœ’å¸‚</option>
Â  Â  Â  Â  Â  <option value="22.9998,120.2269">å°å—å¸‚</option>
s Â  Â  </select>
Â  Â  Â  Â  <div id="nav-weather" class="nav-weather">--Â°</div>
Â  Â  Â  Â  <div id="nav-datetime" class="nav-datetime">è¼‰å…¥ä¸­...</div>
Â  Â  </div>
Â  </div>


Â  <div id="page-home" class="page-content active">
Â 
Â  Â  <div class="header">
Â  Â  Â  <div class="greeting-section">
Â  Â  Â  Â  <div class="greeting">æ‚¨å¥½ï¼æ­¡è¿å›ä¾† ğŸ‘‹</div>
Â  Â  Â  Â  <div class="datetime" id="datetime"></div>
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <div class="weather-forecast-horizontal" id="weatherRow">
Â  Â  Â  Â  <div class="weather-loading">è¼‰å…¥å¤©æ°£è³‡æ–™ä¸­...</div>
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <select id="locationSelectorMain" class="location-selector" aria-label="é¸æ“‡åŸå¸‚">
Â  Â  Â  Â  <option value="25.0330,121.5654">å°åŒ—å¸‚</option>
Â  Â  Â  Â  <option value="24.1477,120.6736">å°ä¸­å¸‚</option>
Â  Â  Â  Â  <option value="22.6273,120.3014">é«˜é›„å¸‚</option>
Â  Â  Â  Â  <option value="25.0375,121.4252">æ–°åŒ—å¸‚</option>
Â  Â  Â  Â  <option value="24.8138,120.9675">æ–°ç«¹å¸‚</option>
Â  Â  Â  Â  <option value="24.9936,121.3010">æ¡ƒåœ’å¸‚</option>
Â  Â  Â  Â  <option value="22.9998,120.2269">å°å—å¸‚</option>
Â  Â  Â  </select>
Â  Â  </div>
Â  Â 
Â  Â  <div class="search-section">
Â  Â  Â  <input id="searchInput" class="search-input" placeholder="æœå°‹ Google æˆ–è¼¸å…¥ç¶²å€..."/>
Â  Â  Â  <button id="searchBtn" class="search-btn">æœå°‹</button>
Â  Â  </div>

Â  Â  <div class="info-section">
Â  Â  Â  <section class="news-card">
Â  Â  Â  Â  <div class="section-header">
Â  Â  Â  Â  Â  <div class="section-title">
Â  Â  Â  Â  Â  Â  <div class="section-icon">ğŸ“°</div>
Â  Â  Â  Â  Â  Â  ä»Šæ—¥æ–°è
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="news-tabs">
Â  Â  Â  Â  Â  Â  <button id="tab-tw" class="news-tab active">å°ç£</button>
Â  Â  Â  Â  Â  Â  <button id="tab-jp" class="news-tab">æ—¥æœ¬</button>
Â  Â  Â  Â  Â  Â  <button id="tab-intl" class="news-tab">åœ‹éš›</button>
Â  Â  Â  Â  Â  Â  <button id="refreshNewsBtn" class="refresh-btn">é‡æ–°æ•´ç†</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <ul id="newsList" class="news-list"></ul>
Â  Â  Â  </section>
Â  Â  Â  <section class="stock-card">
Â  Â  Â  Â  <div class="section-header">
Â  Â  Â  Â  Â  <div class="section-title">è‚¡ç¥¨è¿½è¹¤</div>
Â  Â  Â  Â  Â  <div class="stock-tabs">
Â  Â  Â  Â  Â  Â  <button id="stockTab_tw" class="stock-tab active">å°è‚¡</button>
Â  Â  Â  Â  Â  Â  <button id="stockTab_us" class="stock-tab">ç¾è‚¡</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="stock-search">
s Â  Â  Â  Â  <input id="stockInput" class="stock-search-input" placeholder="è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼ï¼ˆä¾‹ï¼š2330 / AAPLï¼‰" />
Â  Â  Â  Â  Â  <button id="stockAddBtn" class="stock-add-btn">åŠ å…¥</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="stocksList" class="stock-list">
Â  Â  Â  Â  Â  <div class="stocks-loading">è¼‰å…¥è‚¡ç¥¨è³‡æ–™ä¸­...</div>
Â  Â  Â  Â  </div>
Â  Â  Â  </section>
Â  Â  </div>

Â  Â  <div class="map-card-full">
Â  Â  Â  Â  <div class="section-header">
Â  Â  Â  Â  Â  Â  <div class="section-title">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="section-icon">ğŸ—ºï¸</div>
Â  Â  Â  Â  Â  Â  Â  Â  Google åœ°åœ–
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="map-search-box">
Â  Â  Â  Â  Â  Â  Â  Â  <input id="mapSearchInput" class="search-input" placeholder="æœå°‹åœ°é»æˆ–åœ°å€...">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="mapSearchBtn" class="search-btn">æœå°‹</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="map-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <iframe id="mapFrame"
Â  Â  Â  Â  Â  Â  Â  Â  src="https://maps.google.com/maps?q=Taipei&t=&z=13&ie=UTF8&iwloc=&output=embed"
Â  Â  Â  Â  Â  Â  Â  Â  frameborder="0" scrolling="no" marginheight="0" marginwidth="0">
Â  Â  Â  Â  Â  Â  </iframe>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="main-content">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-icon">ğŸ“Š</div>
Â  Â  Â  Â  Â  Â  Â  Â  æˆ‘çš„å°ˆæ¡ˆ
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="project-item" onclick="openLink('#')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="project-name">éŠ·å”®æ•¸æ“šç®¡ç†ç³»çµ±</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="project-desc">OCR è¾¨è­˜ | æ•¸æ“šåˆ†æ | è¦–è¦ºåŒ–å„€è¡¨æ¿</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="project-item" onclick="openLink('#')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="project-name">æ•¸æ“šåˆ†æé é¢</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="project-desc">æœŸé–“å°æ¯” | å“é …åˆ†æ | è¶¨å‹¢åœ–è¡¨</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="project-item" onclick="openLink('#')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="project-name">ä¸Šå‚³ç®¡ç†ç³»çµ±</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="project-desc">åœ–ç‰‡ä¸Šå‚³ | OCR è™•ç† | æ•¸æ“šæ•´åˆ</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-icon">ğŸ”§</div>
Â  Â  Â  Â  Â  Â  Â  Â  å¸¸ç”¨å·¥å…·
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="tool-item" onclick="openLink('https://pages.cloudflare.com/')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-icon">CF</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-name">Cloudflare Pages</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-url">é é¢éƒ¨ç½²ç®¡ç†</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="tool-item" onclick="openLink('https://gemini.google.com/')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-icon">AI</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-name">Gemini AI</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-url">AI åŠ©ç†æœå‹™</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="tool-item" onclick="openLink('https://github.com/')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-icon">GH</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-name">GitHub</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-url">ç¨‹å¼ç¢¼ç‰ˆæœ¬æ§åˆ¶</div>
s Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="tool-item" onclick="openLink('https://www.canva.com/')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-icon">ğŸ¨</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-name">Canva</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="tool-url">åœ–å½¢è¨­è¨ˆå·¥å…·</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-icon">ğŸ”—</div>
Â  Â  Â  Â  Â  Â  Â  Â  å¿«é€Ÿé€£çµ
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="link-grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-link" onclick="openLink('https.google.com.tw')">Google æœå°‹</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-link" onclick="openLink('https://mail.google.com')">Gmail</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-link" onclick="openLink('https://drive.google.com')">Google Drive</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-link" onclick="openLink('https://translate.google.com')">Google ç¿»è­¯</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-link" onclick="openLink('https://www.youtube.com')">YouTube</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-link" onclick="openLink('https://maps.google.com.tw')">Google åœ°åœ–</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-icon">ğŸ’»</div>
Â  Â  Â  Â  Â  Â  Â  Â  é–‹ç™¼è³‡æº
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="bookmark-section">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-category">å‰ç«¯é–‹ç™¼</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://developer.mozilla.org/')">MDN Web Docs</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://stackoverflow.com/')">Stack Overflow</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://codepen.io/')">CodePen</div>
Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-category">è¨­è¨ˆéˆæ„Ÿ</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://dribbble.com/')">Dribbble</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://www.behance.net/')">Behance</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://unsplash.com/')">Unsplash</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-icon">ğŸ¬</div>
Â  Â  Â  Â  Â  Â  Â  Â  å¨›æ¨‚èˆ‡ç”Ÿæ´»
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="bookmark-section">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://www.sbs.com.au/ondemand/')">SBS On Demand</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://www.netflix.com/')">Netflix</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://www.tripadvisor.com.tw/')">TripAdvisor</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bookmark-link" onclick="openLink('https://www.books.com.tw/')">åšå®¢ä¾†</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  </div>Â 
Â  <div id="page-personal" class="page-content">
Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <h2>å€‹äºº (å»ºç½®ä¸­)</h2>
Â  Â  Â  Â  Â  <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡æ”¾ä½ çš„å€‹äººè³‡æ–™æˆ–è¨­å®šã€‚</p>
Â  Â  Â  </div>
Â  </div>


Â  <div id="page-news" class="page-content">
Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <h2>æ–°è (å»ºç½®ä¸­)</h2>
Â  Â  Â  Â  Â  <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡å»ºç½®æ›´å®Œæ•´çš„æ–°èç€è¦½åŠŸèƒ½ã€‚</p>
Â  Â  Â  </div>
Â  </div>


Â  <div id="page-map" class="page-content">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <h2>åœ°åœ– (å»ºç½®ä¸­)</h2>
Â  Â  Â  Â  Â  <p>æ­¤é é¢æš«æ™‚ç•™ç©ºã€‚ä½ å¯ä»¥åœ¨é€™è£¡å»ºç½®æ›´å®Œæ•´çš„åœ°åœ–åŠŸèƒ½ã€‚</p>
Â  Â  Â  </div>
Â  </div>

Â 
Â  <div id="page-work" class="page-content">
Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  <div class="card-icon">ğŸš€</div>
Â  Â  Â  Â  Â  Â  Â  å·¥ä½œæ·å¾‘
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="shortcut-grid" id="workShortcutGrid">
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <p style="text-align:center; font-size:12px; color:#58716b; margin-top:10px;">
Â  Â  Â  Â  Â  Â  Â  æç¤ºï¼šåœ¨æ·å¾‘ä¸ŠæŒ‰ä¸€ä¸‹æ»‘é¼ å³éµå³å¯åˆªé™¤ã€‚
Â  Â  Â  Â  Â  </p>
Â  Â  Â  </div>
Â  Â  Â 
Â  Â  Â  </div>
Â  </div>Â 

<script>
// [ä¿ç•™] ä½ çš„è‚¡ç¥¨ API é‡‘é‘° (Alpha Vantage)
const ALPHA_VANTAGE_API_KEY = 'K09FCGY2Y90L99V0';

// [æ–°å¢] å…¨åŸŸè®Šæ•¸ï¼Œç”¨æ–¼å„²å­˜æ·å¾‘è³‡æ–™
let workShortcuts = [];

// æ—¥æœŸ
function updateDatetime() {
Â  const now = new Date();
Â 
Â  // [å·²é‚„åŸ] æ›´æ–°é¦–é çš„å¤§æ—¥æœŸ
Â  const targetMain = document.getElementById('datetime');
Â  if (targetMain) {
Â  Â  Â  targetMain.textContent = now.toLocaleDateString('zh-TW',{
Â  Â  Â  Â  year:'numeric', month:'long', day:'numeric',weekday:'long',hour:'2-digit',minute:'2-digit'
Â  Â  Â  });
Â  }
Â 
Â  // [å·²é‚„åŸ] æ›´æ–°å°è¦½åˆ—çš„å°æ—¥æœŸ
Â  const targetNav = document.getElementById('nav-datetime');
Â  if (targetNav) {
Â  Â  Â  targetNav.textContent = now.toLocaleDateString('zh-TW', {
Â  Â  Â  Â  month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit'
Â  Â  Â  });
Â  }
}

// å¤©æ°£å‘¼å«API
const weatherCodes = {
Â  0:{emoji:'â˜€ï¸',desc:'æ™´å¤©'},1:{emoji:'ğŸŒ¤ï¸',desc:'æ™´æœ—'},2:{emoji:'â›…',desc:'å¤šé›²'},3:{emoji:'â˜ï¸',desc:'é™°å¤©'},
Â  45:{emoji:'ğŸŒ«ï¸',desc:'éœ§'},51:{emoji:'ğŸŒ¦ï¸',desc:'å°é›¨'},55:{emoji:'ğŸŒ§ï¸',desc:'å¤§é›¨'},61:{emoji:'ğŸŒ§ï¸',desc:'å°é›¨'},63:{emoji:'ğŸŒ§ï¸',desc:'ä¸­é›¨'},
s 65:{emoji:'â›ˆï¸',desc:'å¤§é›¨'},80:{emoji:'ğŸŒ¦ï¸',desc:'é™£é›¨'},81:{emoji:'ğŸŒ§ï¸',desc:'é™£é›¨'},82:{emoji:'â›ˆï¸',desc:'å¤§é™£é›¨'},95:{emoji:'â›ˆï¸',desc:'é›·é›¨'},
Â  99:{emoji:'â›ˆï¸',desc:'å¼·é›·é›¨'}
};
function updateWeather(sourceSelectorId){
Â  const selectorNav = document.getElementById('locationSelectorNav');
Â  const selectorMain = document.getElementById('locationSelectorMain');
Â  const targetRow = document.getElementById('weatherRow');Â 
Â  const targetNav = document.getElementById('nav-weather');Â 
Â 
Â  if (!selectorNav || !selectorMain || !targetRow || !targetNav) return;Â 
Â 
Â  // [æ–°åŠŸèƒ½] åŒæ­¥å…©å€‹é¸æ“‡å™¨
Â  let v;
Â  if (sourceSelectorId === 'locationSelectorNav') {
Â  Â  Â  v = selectorNav.value.split(',');
Â  Â  Â  selectorMain.value = selectorNav.value; // åŒæ­¥
Â  } else {
Â  Â  Â  v = selectorMain.value.split(',');
Â  Â  Â  selectorNav.value = selectorMain.value; // åŒæ­¥
Â  }

Â  targetRow.innerHTML = '<div class="weather-loading">è¼‰å…¥å¤©æ°£è³‡æ–™ä¸­...</div>';
Â  targetNav.innerHTML = '...';Â 

Â  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${v[0]}&longitude=${v[1]}&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Asia/Taipei&forecast_days=7`)
Â  .then(r=>r.json()).then(d=>{
Â  Â 
Â  Â  // 1. [å·²é‚„åŸ] å¡«å…¥ 7 å¤©å¤©æ°£é å ±
Â  Â  let html='';
Â  Â  const wd=['é€±æ—¥','é€±ä¸€','é€±äºŒ','é€±ä¸‰','é€±å››','é€±äº”','é€±å…­'];
Â  Â  for(let i=0;i<7;i++){
Â  Â  Â  const date= new Date (d.daily.time[i]);
Â  Â  Â  const dayName = i===0 ?'ä»Šå¤©':wd[date.getDay()];
Â  Â  Â  const code = d.daily.weathercode[i];
Â  Â  Â  const w = weatherCodes[code] || { emoji:'ğŸŒ¤ï¸', desc:'å¤šé›²'};
Â  Â  Â  const tMax = Math.round(d.daily.temperature_2m_max[i]);
Â  Â  Â  const tMin = Math.round(d.daily.temperature_2m_min[i]);
Â  Â  Â  const rainProb = d.daily.precipitation_probability_max[i] || 0;
Â  Â  Â  // [ä¿®æ”¹] èª¿æ•´ HTML çµæ§‹ä»¥ç¬¦åˆç¸®å°çš„ CSS
Â  Â  Â  html+=`<div class="weather-day-h"><div class="weather-date-h">${dayName}</div><span class="weather-emoji-h">${w.emoji}</span><div class="weather-temp-h">${tMin}Â°-${tMax}Â°</div><div class="weather-rain-h">ğŸ’§${rainProb}%</div><div class="weather-desc-h">${w.desc}</div></div>`;
Â  Â  }
Â  Â  targetRow.innerHTML = html;
Â  Â 
Â  Â  // 2. [å·²é‚„åŸ] å¡«å…¥å°è¦½åˆ—ç•¶å‰å¤©æ°£
Â  Â  if (d.current_weather) {
Â  Â  Â  Â  const cw = d.current_weather;
Â  Â  Â  Â  const w_nav = weatherCodes[cw.weathercode] || { emoji:'ğŸŒ¤ï¸', desc:'å¤šé›²'};
Â  Â  Â  Â  const tMax_nav = Math.round(d.daily.temperature_2m_max[0]);
Â  Â  Â  Â  const tMin_nav = Math.round(d.daily.temperature_2m_min[0]);
Â  Â  Â  Â  targetNav.innerHTML = `<span class="nav-weather-emoji">${w_nav.emoji}</span> ${Math.round(cw.temperature)}Â° <span style="font-weight:400;opacity:0.8;">(${tMin_nav}Â°-${tMax_nav}Â°)</span>`;
Â  Â  }

Â  }).catch(() => {
Â  Â  targetRow.innerHTML='<div class="weather-loading">å¤©æ°£è³‡æ–™è¼‰å…¥å¤±æ•—</div>';
Â  Â  targetNav.innerHTML = 'å¤©æ°£å¤±æ•—';
Â  });
}

// æœå°‹ (å®Œæ•´ä¿ç•™ä½ åŸæœ¬çš„ç¨‹å¼ç¢¼)
document.getElementById('searchBtn').onclick = () => {
Â  const val=document.getElementById('searchInput').value.trim();
Â  if(!val) return;
Â  if(val.includes('.') && !val.includes(' ')) {
Â  Â  window.open(val.startsWith('http') ? val : 'https://' + val, '_blank');
Â  } else {
Â  Â  window.open('https://www.google.com/search?q=' + encodeURIComponent(val), '_blank');
Â  }
};
document.getElementById('searchInput').addEventListener('keypress', e =>{
Â  if(e.key === 'Enter') document.getElementById('searchBtn').click();
});

// åœ°åœ– (å·²ä¿®æ­£)
function searchGoogleMaps() {
Â  const input = document.getElementById('mapSearchInput');
Â  if (!input) return;Â 
Â  const query = input.value.trim();
Â  if (!query) return;

Â  const mapFrame = document.getElementById('mapFrame');
Â  if (!mapFrame) return;
Â  // [!!! ä¿®æ­£ !!!] ä¿®æ­£ç‚ºå¯é‹ä½œçš„ Google Maps æœå°‹ URL
Â  const newSrc = `https://maps.google.com/maps?q=${encodeURIComponent(query)}&t=&z=15&ie=UTF8&iwloc=&output=embed`;Â 
Â  mapFrame.src = newSrc;
}

// æ–°è (å·²ä¿®æ­£ CORS)
const RSS_FEEDS = {
Â  Â  tw: [
Â  Â  Â  Â  'https://news.ltn.com.tw/rss/all.xml',Â  Â  Â  Â // è‡ªç”±æ™‚å ± (é¦–é¸)
Â  Â  Â  Â  'https://www.cna.com.tw/rsspolitics.xml',Â  // ä¸­å¤®é€šè¨Šç¤¾ (å‚™æ´)
Â  Â  ],
Â  Â  jp: [
Â  Â  Â  Â  'https://www3.nhk.or.jp/rss/news/cat0.xml',Â  Â  // NHK (é¦–é¸)
Â  Â  Â  Â  'https://www.asahi.com/rss/asahi/newsheadlines.rdf' // æœæ—¥æ–°è (å‚™æ´)
Â  Â  ],
Â  Â  intl: [
Â  Â  Â  Â  'http://feeds.bbci.co.uk/news/world/rss.xml' // BBC News
Â  Â  ]
};
let currentNewsTab = 'tw';Â 
function switchNewsTab(tab){
Â  currentNewsTab = tab;
Â  document.querySelectorAll('#page-home .news-tab').forEach(btn => btn.classList.remove('active'));
Â  document.getElementById('tab-'+tab).classList.add('active');
Â  loadNews();Â 
}
function cleanCData(str) {
Â  Â  if (str.startsWith('<![CDATA[') && str.endsWith(']]>')) {
Â  Â  Â  Â  return str.substring(9, str.length - 3);
Â  Â  }
Â  Â  return str.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
}
function parseRSS(xmlText) {
Â  Â  const articles = [];
Â  Â  const maxArticles = 5;
Â  Â  let items = [...xmlText.matchAll(/<item>([\s\S]*?)<\/item>/g)];
Â  Â  if (items.length === 0) {
Â  Â  Â  Â  Â items.push(...xmlText.matchAll(/<item [^>]+>([\s\S]*?)<\/item>/g));
Â  Â  }
Â  Â  if (items.length === 0) {
Â  Â  Â  Â  Â items.push(...xmlText.matchAll(/<item[^>]+rdf:about="([^"]+)"[\s\S]*?<title>([\s\S]*?)<\/title>[\s\S]*?<\/item>/g));
Â  Â  Â  Â  Â for (let i = 0; i < items.length && i < maxArticles; i++) {
Â  Â  Â  Â  Â  Â  Â articles.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â title: cleanCData(items[i][2]),
Â  Â  Â  Â  Â  Â  Â  Â  Â url: items[i][1],
Â  Â  Â  Â  Â  Â  Â  Â  Â source: { name: 'æœæ—¥æ–°è' }
Â  Â  Â  Â  Â  Â  Â });
Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â return articles;
Â  Â  }
Â  Â  for (let i = 0; i < items.length && i < maxArticles; i++) {
Â  Â  Â  Â  const itemContent = items[i][1];
Â  Â  Â  Â  const titleMatch = itemContent.match(/<title>([\s\S]*?)<\/title>/);
Â  Â  Â  Â  const title = titleMatch ? cleanCData(titleMatch[1]) : 'ç„¡æ¨™é¡Œ';
Â  Â  Â  Â  const linkMatch = itemContent.match(/<link>([\s\S]*?)<\/link>/);
Â  Â  Â  Â  const link = linkMatch ? (linkMatch[1] || '#') : '#';
Â  Â  Â  Â  let sourceName = null;
Â  Â  Â  Â  const creatorMatch = itemContent.match(/<dc:creator>([\s\S]*?)<\/dc:creator>/);
Â  Â  Â  Â  sourceName = creatorMatch ? cleanCData(creatorMatch[1]) : 'N/A';
Â  Â  Â  Â  articles.push({ title: title, url: link.trim(), source: { name: sourceName } });
Â  Â  }
Â  Â  return articles;
}
async function loadNews(){
Â  const list = document.getElementById('newsList');
Â  if (!list) return;Â 
Â 
Â  list.innerHTML = '<li class="news-loading">è¼‰å…¥æ–°èä¸­â€¦</li>';
Â  const refreshBtn = document.getElementById('refreshNewsBtn');
Â  if (refreshBtn) refreshBtn.disabled = true;

Â  const urlsToTry = RSS_FEEDS[currentNewsTab] || RSS_FEEDS['tw'];
Â  let success = false;

Â  for (const rssUrl of urlsToTry) {
Â  Â  Â  try {
Â  Â  Â  Â  Â  // [!!! ä¿®æ­£ !!!] é‚„åŸé€™ä¸€è¡Œ
Â  Â  Â  Â  Â  const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(rssUrl)}`;
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  const res = await fetch(proxyUrl);
Â  Â  Â  Â  Â  if (!res.ok) throw new Error(`ä»£ç†ä¼ºæœå™¨éŒ¯èª¤ (ç‹€æ…‹: ${res.status})`);
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  // [!!! ä¿®æ­£ !!!] é‚„åŸé€™ä¸€è¡Œ
Â  Â  Â  Â  Â  const xmlText = await res.text();Â 
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  const articles = parseRSS(xmlText);
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  if (articles && articles.length > 0) {
Â  Â  Â  Â  Â  Â  Â  list.innerHTML = '';Â 
Â  Â  Â  Â  Â  Â  Â  articles.forEach(article => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  let sourceName = article.source.name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (sourceName === 'N/A' || !sourceName) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (rssUrl.includes('cna.com')) sourceName = 'ä¸­å¤®é€šè¨Šç¤¾';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (rssUrl.includes('ltn.com')) sourceName = 'è‡ªç”±æ™‚å ±';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (rssUrl.includes('udn.com')) sourceName = 'è¯åˆæ–°èç¶²';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (rssUrl.includes('nhk.or.jp')) sourceName = 'NHK';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (rssUrl.includes('bbci.co.uk')) sourceName = 'BBC News';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else sourceName = 'RSS ä¾†æº';
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  list.insertAdjacentHTML('beforeend', `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="news-item" onclick="window.open('${article.url}','_blank')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="news-item-title">${article.title || 'ç„¡æ¨™é¡Œ'}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="news-item-meta">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${sourceName}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>`);
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  success = true;
Â  Â  Â  Â  Â  Â  Â  break;Â 
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  throw new Error('RSS å…§å®¹ç‚ºç©ºæˆ–ç„¡æ³•è§£æ');
s Â  Â  Â  }
Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  console.warn(`RSS æ¥æº ${rssUrl} å¤±æ•—: ${e.message}`);
Â  Â  Â  }
Â  }
Â  if (!success) {
Â  Â  Â  list.innerHTML = `<li class="news-loading">æ–°èè¼‰å…¥å¤±æ•—: æ‰€æœ‰å‚™æ´ä¾†æºå‡å˜—è©¦å¤±æ•—ã€‚</li>`;
Â  }
Â  if (refreshBtn) refreshBtn.disabled = false;
}

// è‚¡ç¥¨å€ (å·²ä¿®æ­£ CORS)
const stockWatchlist = {
Â  tw: ['2330','2317','2454','2603','0050'],
Â  us: ['AAPL','GOOGL','TSLA','NVDA','MSFT']
};
let stockCurrentMarket = 'tw';
function switchStockMarket(market){
Â  stockCurrentMarket=market;
Â  document.querySelectorAll('.stock-tab').forEach(b => b.classList.remove('active'));
Â  document.getElementById('stockTab_' + market).classList.add('active');
Â  loadStocks();
}
async function loadStocks(){
Â  const container = document.getElementById('stocksList');
Â  if (!container) return;Â 
Â 
Â  const watchlist = stockWatchlist[stockCurrentMarket];
Â  container.innerHTML = '<div class="stocks-loading">è¼‰å…¥è‚¡ç¥¨è³‡æ–™ä¸­â€¦</div>';
Â  if(stockCurrentMarket==='tw'){
Â  Â  container.innerHTML = '';
Â  Â  for(const symbol of watchlist){
Â  Â  Â  try{
Â  Â  Â  Â  // [!!! ä¿®æ­£ !!!] é‚„åŸé€™ä¸€è¡Œ
Â  Â  Â  Â  const twseUrl = `https://mis.twse.com.tw/stock/api/getStockInfo.jsp?ex_ch=tse_${symbol}.tw&json=1&delay=0`;
Â  Â  Â  Â  const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(twseUrl)}`;
Â  Â  Â  Â 
Â  Â  Â  Â  const res = await fetch(proxyUrl);
Â  Â  Â  Â  // [!!! ä¿®æ­£ !!!] é‚„åŸé€™ä¸€è¡Œ
Â  Â  Â  Â  const textData = await res.text();
Â  Â  Â  Â  const data = JSON.parse(textData);Â 
Â  Â  Â  Â 
Â  Â  Â  Â  if(data.msgArray && data.msgArray.length > 0) {
Â  Â  Â  Â  Â  const st = data.msgArray[0];
Â  Â  Â  Â  Â  const price = parseFloat(st.z) || 0;
Â  Â  Â  Â  Â  const prevClose = parseFloat(st.y) || price;
Â  Â  Â  Â  Â  const change = price - prevClose;
Â  Â  Â  Â  Â  const changePercent = prevClose!==0 ? (change/prevClose)*100 : 0;
Â  Â  Â  Â  Â  const c = change>0 ? 'stock-up' : change<0 ? 'stock-down' : 'stock-neutral';
Â  Â  Â  Â  Â  container.insertAdjacentHTML('beforeend', `
Â  Â  Â  Â  Â  Â  <div class="stock-item">
Â  Â  Â  Â  Â  Â  Â  <div class="stock-info">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-symbol">${symbol}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-name">${st.n||symbol}</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="stock-price-info">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-price ${c}">$${price.toFixed(2)}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-change ${c}">${change>0?'+':''}${change.toFixed(2)} (${changePercent>0?'+':''}${changePercent.toFixed(2)}%)</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>`);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  container.insertAdjacentHTML('beforeend', `<div class="stock-item">ç„¡æ³•å–å¾— ${symbol} è³‡è¨Š</div>`);
Â  Â  Â  Â  }
Â  Â  Â  }catch(e){
Â  Â  Â  Â  console.error(`è¼‰å…¥ ${symbol} å¤±æ•—:`, e);
Â  Â  Â  Â  container.insertAdjacentHTML('beforeend', `<div class="stock-item">è¼‰å…¥ ${symbol} å¤±æ•—</div>`);
Â  Â  Â  }
Â  Â  }
Â  } else {
Â  Â  // (Alpha Vantage (ç¾è‚¡) ä¸éœ€è¦ä»£ç†ï¼Œä¿æŒåŸæ¨£)
Â  Â  container.innerHTML = '';
Â  Â  for(const symbol of watchlist){
Â  Â  Â  try{
Â  Â  Â  Â  const url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${ALPHA_VANTAGE_API_KEY}`;
Â  Â  Â  Â  const response = await fetch(url);
Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  if(data['Global Quote']){
Â  Â  Â  Â  Â  const q = data['Global Quote'];
Â  Â  Â  Â  Â  const price = parseFloat(q["05. price"]) || 0;
Â  Â  Â  Â  Â  const change = parseFloat(q["09. change"]) || 0;
Â  Â  Â  Â  Â  const changePercent = parseFloat(q["10. change percent"]?.replace('%','')) || 0;
Â  Â  Â  Â  Â  const c = change > 0 ? 'stock-up' : change < 0 ? 'stock-down' : 'stock-neutral';
Â  Â  Â  Â  Â  container.insertAdjacentHTML('beforeend', `
Â  Â  Â  Â  Â  Â  <div class="stock-item">
Â  Â  Â  Â  Â  Â  Â  <div class="stock-info">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-symbol">${symbol}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-name">${q["01. symbol"]||symbol}</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="stock-price-info">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stock-price ${c}">$${price.toFixed(2)}</div>
source Â  Â  Â  Â  Â  Â  Â  <div class="stock-change ${c}">${change>0?'+':''}${change.toFixed(2)} (${changePercent>0?'+':''}${changePercent.toFixed(2)}%)</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>`);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  container.insertAdjacentHTML('beforeend', `<div class="stock-item">ç„¡æ³•å–å¾— ${symbol} è³‡è¨Š (API é™åˆ¶)</div>`);
Â  Â  Â  Â  }
Â  Â  Â  }catch(e){
Â  Â  Â  Â  container.insertAdjacentHTML('beforeend', `<div class="stock-item">è¼‰å…¥ ${symbol} å¤±æ•—</div>`);
Â  Â  Â  }
Â  Â  Â  await delay(1400);Â 
Â  Â  }
Â  }
}
function delay(ms){return new Promise(r=>setTimeout(r,ms));}Â 

// [å·²ä¿®æ­£] ç§»é™¤ 'stockAddBtn.onclick' å…§çš„ 'twseUrlrl' éŒ¯å­— (é€™å€‹å‡½å¼å…§æ ¹æœ¬ä¸éœ€è¦é€™å€‹è®Šæ•¸)
document.getElementById('stockAddBtn').onclick = () => {
Â  const input=document.getElementById('stockInput');
Â  let symbol=input.value.trim().toUpperCase();
Â  if(!symbol) return alert('è«‹è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼');
Â  if (stockCurrentMarket === 'tw') {
Â  Â  Â  const twSymbol = symbol.match(/\d+/);
Â  Â  Â  if (twSymbol) { symbol = twSymbol[0]; }
Â  }
Â  const list=stockWatchlist[stockCurrentMarket];
Â  if(list.includes(symbol)) return alert('è‚¡ç¥¨å·²åœ¨æ¸…å–®');
Â  if(list.length >= 7) return alert('æœ€å¤šåªèƒ½è¿½è¹¤7æ”¯è‚¡ç¥¨');
Â  list.push(symbol);
Â  input.value = '';
Â  loadStocks();
};

// [ä¿ç•™] ä½ çš„ openLink å‡½å¼
function openLink(url) {
Â  Â  window.open(url, '_blank');
}

</script>

<script>
// --- [æ–°åŠŸèƒ½] å·¥ä½œæ·å¾‘ ---
const WORK_SHORTCUT_KEY = 'myportal_workShortcuts_v1'; // ç”¨æ–¼ localStorage çš„ Key

/**
Â * å¾ localStorage è¼‰å…¥æ·å¾‘è³‡æ–™ï¼Œå¦‚æœæ²’æœ‰å°±ç”¨é è¨­å€¼
Â */
function loadWorkShortcuts() {
Â  Â  const savedShortcuts = localStorage.getItem(WORK_SHORTCUT_KEY);
Â  Â  if (savedShortcuts) {
Â  Â  Â  Â  workShortcuts = JSON.parse(savedShortcuts);
Â  Â  } else {
Â  Â  Â  Â  // é è¨­å€¼ (ä½ å¯ä»¥è‡ªè¡Œä¿®æ”¹)
Â  Â  Â  Â  workShortcuts = [
Â  Â  Â  Â  Â  Â  { name: 'Google', url: 'https://google.com' },
Â  Â  Â  Â  Â  Â  { name: 'GitHub', url: 'https://github.com' },
Â  Â  Â  Â  Â  Â  { name: 'Cloudflare', url: 'https://dash.cloudflare.com/' }
Â  Â  Â  Â  ];
Â  Â  }
Â  Â  renderWorkShortcuts();
}

/**
Â * å°‡æ·å¾‘è³‡æ–™æ¸²æŸ“åˆ° #workShortcutGrid å®¹å™¨ä¸­
Â */
function renderWorkShortcuts() {
Â  Â  const grid = document.getElementById('workShortcutGrid');
Â  Â  if (!grid) return; // å¦‚æœæ‰¾ä¸åˆ°å®¹å™¨ï¼Œå°±ä¸­æ–·
Â  Â  grid.innerHTML = ''; // æ¸…ç©ºç¾æœ‰å…§å®¹

Â  Â  // 1. æ¸²æŸ“å„²å­˜çš„æ·å¾‘
Â  Â  workShortcuts.forEach((shortcut, index) => {
Â  Â  Â  Â  // æˆ‘å€‘ä½¿ç”¨ Google çš„æœå‹™ä¾†è‡ªå‹•æŠ“å–ç¶²ç«™çš„ favicon
s Â  Â  Â  const faviconUrl = `https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${shortcut.url}&size=64`;
Â  Â  Â  Â 
Â  Â  Â  Â  // å¦‚æœåœ–ç¤ºè¼‰å…¥å¤±æ•—ï¼Œé¡¯ç¤ºåç¨±çš„ç¬¬ä¸€å€‹å­—
Â  Â  Â  Â  const fallbackInitial = (shortcut.name[0] || '?').toUpperCase();

Â  Â  Â  Â  const itemHtml = `
Â  Â  Â  Â  Â  Â  <a class="shortcut-item" href="${shortcut.url}" target="_blank"Â 
Â  Â  Â  Â  Â  Â  Â  Â title="${shortcut.name}\n(å³éµé»æ“Šå¯åˆªé™¤)"
Â  Â  Â  Â  Â  Â  Â  Â oncontextmenu="event.preventDefault(); removeWorkShortcut(${index});">
Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="shortcut-icon">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <imgÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src="${faviconUrl}"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt="${shortcut.name} icon"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="fallback-initial" style="display:none;">${fallbackInitial}</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="shortcut-name">${shortcut.name}</div>
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  `;
Â  Â  Â  Â  grid.insertAdjacentHTML('beforeend', itemHtml);
Â  Â  });

Â  Â  // 2. æ¸²æŸ“ "æ–°å¢" æŒ‰éˆ•
Â  Â  const addButtonHtml = `
Â  Â  Â  Â  <div class="shortcut-add-btn" onclick="addWorkShortcut()">
Â  Â  Â  Â  Â  Â  <div class="shortcut-icon">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="shortcut-icon-add">+</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="shortcut-name">æ–°å¢æ·å¾‘</div>
Â  Â  Â  Â  </div>
Â  Â  `;
Â  Â  grid.insertAdjacentHTML('beforeend', addButtonHtml);
}

/**
Â * å°‡ç›®å‰çš„æ·å¾‘é™£åˆ—å„²å­˜åˆ° localStorage
Â */
function saveWorkShortcuts() {
Â  Â  localStorage.setItem(WORK_SHORTCUT_KEY, JSON.stringify(workShortcuts));
}

/**
Â * å½ˆå‡ºè¦–çª—ä»¥æ–°å¢æ·å¾‘
Â */
function addWorkShortcut() {
Â  Â  const name = prompt("è«‹è¼¸å…¥æ·å¾‘åç¨±ï¼š");
Â  Â  if (!name) return; // ä½¿ç”¨è€…æŒ‰ä¸‹å–æ¶ˆ

Â  Â  let url = prompt("è«‹è¼¸å…¥ç¶²ç«™ URLï¼š", "https://");
Â  Â  if (!url) return; // ä½¿ç”¨è€…æŒ‰ä¸‹å–æ¶ˆ
Â  Â 
Â  Â  // ç°¡å–®çš„ URL ä¿®æ­£ï¼Œç¢ºä¿æœ‰ http:// æˆ– https://
Â  Â  if (!url.startsWith('http://') && !url.startsWith('https://')) {
Â  Â  Â  Â  url = 'https://' + url;
Â  Â  }

Â  Â  workShortcuts.push({ name: name, url: url });
Â  Â  saveWorkShortcuts();
Â  Â  renderWorkShortcuts(); // é‡æ–°æ¸²æŸ“ç•«é¢
}

/**
Â * ç§»é™¤æŒ‡å®š index çš„æ·å¾‘
Â */
function removeWorkShortcut(index) {
Â  Â  if (!workShortcuts[index]) return; // å®‰å…¨æª¢æŸ¥
Â  Â 
Â  Â  const name = workShortcuts[index].name;
Â  Â  if (confirm(`æ‚¨ç¢ºå®šè¦åˆªé™¤ "${name}" é€™å€‹æ·å¾‘å—ï¼Ÿ`)) {
Â  Â  Â  Â  workShortcuts.splice(index, 1); // å¾é™£åˆ—ä¸­ç§»é™¤
Â  Â  Â  Â  saveWorkShortcuts();
Â  Â  Â  Â  renderWorkShortcuts(); // é‡æ–°æ¸²æŸ“ç•«é¢
Â  Â  }
}
// --- [æ–°åŠŸèƒ½] å·¥ä½œæ·å¾‘ çµæŸ ---
</script>


<script>
// [æ–°åŠŸèƒ½] åˆ†é åˆ‡æ›çš„ JS é‚è¼¯
function initTabNavigation() {
Â  Â  const tabs = document.querySelectorAll('.portal-tab-btn');
Â  Â  const pages = document.querySelectorAll('.page-content');

Â  Â  tabs.forEach(tab => {
Â  Â  Â  Â  tab.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const pageName = tab.dataset.page; // e.g., "home"
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  // 1. æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
Â  Â  Â  Â  Â  Â  tabs.forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  // 2. åˆ‡æ›é é¢å…§å®¹
Â  Â  Â  Â  Â  Â  pages.forEach(page => {
Â  Â  Â  Â  Â  Â  Â  Â  if (page.id === 'page-' + pageName) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // [!!! ä¿®æ­£ !!!] é‚„åŸé€™ä¸€è¡Œ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  page.classList.add('active');s
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // [!!! ä¿®æ­£ !!!] é‚„åŸé€™ä¸€è¡Œ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  page.classList.remove('active');Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  // 3. [ä¿®æ”¹] ç•¶åˆ‡æ›å› "é¦–é " æ™‚ï¼Œæ‰åŸ·è¡ŒåŠŸèƒ½
s Â  Â  Â  Â  Â  if (pageName === 'home') {
Â  Â  Â  Â  Â  Â  Â  Â  Â // æª¢æŸ¥é¦–é åŠŸèƒ½æ˜¯å¦éœ€è¦é‡æ–°è¼‰å…¥
Â  Â  Â  Â  Â  Â  Â  Â  Â const weatherRow = document.getElementById('weatherRow');
Â  Â  Â  Â  Â  Â  Â  Â  Â if (!weatherRow || !weatherRow.innerHTML.includes('weather-day-h')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â updateWeather('locationSelectorNav'); // [ä¿®æ”¹] è§¸ç™¼
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â const stockList = document.getElementById('stocksList');
Â  Â  Â  Â  Â  Â  Â  Â  Â if (!stockList || !stockList.innerHTML.includes('stock-item')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â loadStocks();
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â const newsList = document.getElementById('newsList');
s Â  Â  Â  Â  Â  Â  Â  Â  if (!newsList || !newsList.innerHTML.includes('news-item')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â loadNews();
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  // [æ–°å¢] ç•¶åˆ‡æ›åˆ° "å·¥ä½œ" é æ™‚ï¼Œè¼‰å…¥æ·å¾‘
Â  Â  Â  Â  Â  Â  else if (pageName === 'work') {
Â  Â  Â  Â  Â  Â  Â  Â  Â // æª¢æŸ¥æ˜¯å¦å·²è¼‰å…¥ (é¿å…é‡è¤‡è¼‰å…¥)
Â  Â  Â  Â  Â  Â  Â  Â  Â const grid = document.getElementById('workShortcutGrid');
Â  Â  Â  Â  Â  Â  Â  Â  Â if (grid && grid.innerHTML.trim() === '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadWorkShortcuts();
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  });
}


// --- ç¨‹å¼ç¢¼é–‹å§‹åŸ·è¡Œ ---
document.addEventListener('DOMContentLoaded', () => {
Â  Â  // 1. ç¶å®šåˆ†é åˆ‡æ›
Â  Â  initTabNavigation();
Â  Â 
Â  Â  // 2. åˆå§‹è¼‰å…¥ "é¦–é " çš„æ‰€æœ‰åŠŸèƒ½
Â  Â  updateDatetime();
Â  Â  updateWeather('locationSelectorNav'); // [ä¿®æ”¹] åˆå§‹è¼‰å…¥
Â  Â  loadStocks();
Â  Â  loadNews();
Â  Â 
s Â  // [è¨»] loadWorkShortcuts() ä¸åœ¨é€™è£¡å‘¼å«ï¼Œ
Â  Â  // æ”¹ç‚ºåœ¨ initTabNavigation() ä¸­é»æ“Šåˆ†é æ™‚æ‰å‘¼å«
Â  Â 
Â  Â  // 3. ç¶å®šé¦–é ä¸Šçš„æ‰€æœ‰æŒ‰éˆ•
Â  Â  // (å¤©æ°£/å°è¦½åˆ—) [ä¿®æ”¹] ç¶å®šå…©å€‹é¸æ“‡å™¨
Â  Â  document.getElementById('locationSelectorNav').onchange = () => updateWeather('locationSelectorNav');
Â  Â  document.getElementById('locationSelectorMain').onchange = () => updateWeather('locationSelectorMain');
Â  Â 
Â  Â  // (æœå°‹)
Â  Â  document.getElementById('searchBtn').onclick = () => {
Â  Â  Â  const val=document.getElementById('searchInput').value.trim();
s Â  Â  if(!val) return;
Â  Â  Â  if(val.includes('.') && !val.includes(' ')) {
Â  Â  Â  Â  window.open(val.startsWith('http') ? val : 'https://' + val, '_blank');
Â  Â  Â  } else {
Â  Â  Â  Â  window.open('https://www.google.com/search?q=' + encodeURIComponent(val), '_blank');
Â  Â  Â  }
Â  Â  };
Â  Â  document.getElementById('searchInput').addEventListener('keypress', e =>{
Â  Â  Â  if(e.key === 'Enter') document.getElementById('searchBtn').click();
style Â  });
Â  Â  // (æ–°è)
Â  Â  document.getElementById('tab-tw').onclick = () => switchNewsTab('tw');
Â  Â  document.getElementById('tab-jp').onclick = () => switchNewsTab('jp');
Â  Â  document.getElementById('tab-intl').onclick = () => switchNewsTab('intl');
Â  Â  document.getElementById('refreshNewsBtn').onclick = loadNews;
Â  Â  // (è‚¡ç¥¨)
Â  Â  document.getElementById('stockTab_tw').onclick = () => switchStockMarket('tw');
Â  Â  document.getElementById('stockTab_us').onclick = () => switchStockMarket('us');
Â  Â Â 
Â  Â  // [å·²ä¿®æ­£] ç§»é™¤ 'stockAddBtn.onclick' å…§çš„ 'twseUrlrl' éŒ¯å­— (é€™å€‹å‡½å¼å…§æ ¹æœ¬ä¸éœ€è¦é€™å€‹è®Šæ•¸)
s Â  document.getElementById('stockAddBtn').onclick = () => {
Â  Â  Â  const input=document.getElementById('stockInput');
Â  Â  Â  let symbol=input.value.trim().toUpperCase();
Â  Â  Â  if(!symbol) return alert('è«‹è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼');
s Â  Â  if (stockCurrentMarket === 'tw') {
Â  Â  Â  Â  Â  const twSymbol = symbol.match(/\d+/);
Â  Â  Â  Â  Â  if (twSymbol) { symbol = twSymbol[0]; }
Â  Â  Â  }
Â  Â  Â  const list=stockWatchlist[stockCurrentMarket];
Â  Â  Â  if(list.includes(symbol)) return alert('è‚¡ç¥¨å·²åœ¨æ¸…å–®');
Â  Â  Â  if(list.length >= 7) return alert('æœ€å¤šåªèƒ½è¿½è¹¤7æ”¯è‚¡ç¥¨');
Â  Â  Â  list.push(symbol);
Â  Â  Â  input.value = '';
Â  Â  Â  loadStocks();
Â  Â  };
Â  Â  // (åœ°åœ–)
Â  Â  document.getElementById('mapSearchBtn').onclick = searchGoogleMaps;
Â  Â  document.getElementById('mapSearchInput').addEventListener('keypress', e => {
Â  Â  Â  if (e.key === 'Enter') searchGoogleMaps();
Â  Â  });
});
</script>
</body>
</html>
